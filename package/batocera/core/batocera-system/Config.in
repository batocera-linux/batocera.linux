
##### define variables to use in this file
if BR2_PACKAGE_BATOCERA_RPI_VCORE || BR2_PACKAGE_BATOCERA_RPI_MESA3D
	config BR2_PACKAGE_BATOCERA_RPI_ANY
	bool "any rpi"
	default y
endif

if BR2_PACKAGE_BATOCERA_TARGET_BCM2835	|| \
   BR2_PACKAGE_BATOCERA_TARGET_BCM2836	|| \
   BR2_PACKAGE_BATOCERA_TARGET_BCM2837
	config BR2_PACKAGE_BATOCERA_TARGET_RPI_GLES2
	bool "rpi_gles2"
	default y
	help
	  Selected when a RaspberryPi gles2 platform is being built
endif

if BR2_PACKAGE_BATOCERA_TARGET_X86 || BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY
	config BR2_PACKAGE_BATOCERA_TARGET_X86_ANY
	bool "any x86 or x86_64"
	default y
endif

if BR2_PACKAGE_BATOCERA_TARGET_X86_64 || BR2_PACKAGE_BATOCERA_TARGET_ZEN3
	config BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY
	bool "any x86_64"
	default y
endif

if BR2_PACKAGE_BATOCERA_TARGET_AMLOGIC_GLES2 || BR2_PACKAGE_BATOCERA_TARGET_AMLOGIC_GLES3
	config BR2_PACKAGE_BATOCERA_TARGET_AMLOGIC_ANY
	bool "any amlogic"
	default y
endif

if BR2_PACKAGE_BATOCERA_TARGET_RK3128 || BR2_PACKAGE_BATOCERA_TARGET_RK3328
	config BR2_PACKAGE_BATOCERA_TARGET_ROCKCHIP_GLES2
	bool "rockchip_gles2"
	default y
	help
	  Selected when a Rockchip gles2 platform is being built
endif

if  BR2_PACKAGE_BATOCERA_TARGET_RK3399	|| \
    BR2_PACKAGE_BATOCERA_TARGET_RK3288	|| \
    BR2_PACKAGE_BATOCERA_TARGET_RK3588	|| \
    BR2_PACKAGE_BATOCERA_TARGET_RK3568	|| \
    BR2_PACKAGE_BATOCERA_TARGET_RK3326
	config BR2_PACKAGE_BATOCERA_TARGET_ROCKCHIP_GLES3
	bool "rockchip_gles3"
	default y
	help
	  Selected when a Rockchip gles3 platform is being built
endif

if BR2_PACKAGE_BATOCERA_TARGET_S905 || BR2_PACKAGE_BATOCERA_TARGET_S812
	config BR2_PACKAGE_BATOCERA_TARGET_AMLOGIC_GLES2
	bool "amlogic gles2"
	default y
endif

if BR2_PACKAGE_BATOCERA_TARGET_S905GEN2	|| \
   BR2_PACKAGE_BATOCERA_TARGET_S905GEN3 || \
   BR2_PACKAGE_BATOCERA_TARGET_S922X	|| \
   BR2_PACKAGE_BATOCERA_TARGET_A3GEN2	|| \
   BR2_PACKAGE_BATOCERA_TARGET_S9GEN4
	config BR2_PACKAGE_BATOCERA_TARGET_AMLOGIC_GLES3
	bool "amlogic gles3"
	default y
endif

# add platforms that support GLES2 here
# the GLES2 backend maps to OpenGL 2.1 on desktop, OpenGL ES 2.0 on mobile and WebGL 1.0 on the web.
if  BR2_PACKAGE_BATOCERA_TARGET_X86_ANY		|| \
    BR2_PACKAGE_BATOCERA_TARGET_AMLOGIC_GLES2	|| \
    BR2_PACKAGE_BATOCERA_TARGET_ROCKCHIP_GLES2	|| \
    BR2_PACKAGE_BATOCERA_TARGET_RPI_GLES2	|| \
    BR2_PACKAGE_BATOCERA_TARGET_H3		|| \
    BR2_PACKAGE_BATOCERA_TARGET_H6		|| \
    BR2_PACKAGE_BATOCERA_TARGET_H5		||\
    BR2_PACKAGE_BATOCERA_TARGET_XU4
	config BR2_PACKAGE_BATOCERA_GLES2
	bool "target has gles2 support"
	default y
endif

# add platforms that support GLES3 here
# the GLES3 backend maps to OpenGL 3.3 on desktop, OpenGL ES 3.0 on mobile and WebGL 2.0 on the web.
if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY		|| \
   BR2_PACKAGE_BATOCERA_TARGET_BCM2711		|| \
   BR2_PACKAGE_BATOCERA_TARGET_BCM2712		|| \
   BR2_PACKAGE_BATOCERA_TARGET_RISCV		|| \
   BR2_PACKAGE_BATOCERA_TARGET_H616		|| \
   BR2_PACKAGE_BATOCERA_TARGET_AMLOGIC_GLES3	|| \
   BR2_PACKAGE_BATOCERA_TARGET_ROCKCHIP_GLES3	|| \
   BR2_PACKAGE_BATOCERA_TARGET_ODIN
	config BR2_PACKAGE_BATOCERA_GLES3
	bool "target gles3 support"
	default y
endif

config BR2_PACKAGE_BATOCERA_CORES_STILL_COMMERCIALIZED
	bool "batocera is limited to abandoned systems"


##########################################
config BR2_PACKAGE_BATOCERA_MUSIC_SUPPORT
	bool "batocera.linux music formats support"

	# MIDI
	select BR2_PACKAGE_FLUIDSYNTH
	select BR2_PACKAGE_FLUID_SOUNDFONT

	# MIDI tools
	select BR2_PACKAGE_ALSA_UTILS_ACONNECT  if BR2_PACKAGE_ALSA_UTILS
	select BR2_PACKAGE_ALSA_UTILS_APLAYMIDI if BR2_PACKAGE_ALSA_UTILS

	# Modules
	select BR2_PACKAGE_LIBMODPLUG
	select BR2_PACKAGE_LIBXMP

	# MP3
	select BR2_PACKAGE_LIBMAD

	help
	  Music support packages (MIDI, MOD, S3M, XM, ....)

config BR2_PACKAGE_BATOCERA_VULKAN
	bool "batocera.linux Vulkan support"

	# Vulkan headers, loaders, SPIR-V, glsLang
	select BR2_PACKAGE_VULKAN_TOOLS
	select BR2_PACKAGE_SPIRV_TOOLS

	# Vulkan mesa drivers
	select BR2_PACKAGE_MESA3D_VULKAN_DRIVER_INTEL		if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY
	select BR2_PACKAGE_MESA3D_VULKAN_DRIVER_HASWELL		if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY
	select BR2_PACKAGE_MESA3D_VULKAN_DRIVER_AMD		if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY
	select BR2_PACKAGE_MESA3D_VULKAN_DRIVER_BROADCOM	if BR2_PACKAGE_BATOCERA_RPI_MESA3D
	select BR2_PACKAGE_MESA3D_VULKAN_DRIVER_PANFROST	if BR2_PACKAGE_BATOCERA_PANFROST_MESA3D
	select BR2_PACKAGE_MESA3D_VULKAN_DRIVER_FREEDRENO	if BR2_PACKAGE_BATOCERA_FREEDRENO_MESA3D

	help
	  Vulkan support for batocera.linux

config BR2_PACKAGE_BATOCERA_SYSTEM
	bool "batocera.linux minimal"

	# RISC-V support needs a hack here to declare as RV64GC, needed for Rust
	select BR2_RISCV_ISA_RVC		if BR2_PACKAGE_BATOCERA_TARGET_RISCV

	# minimal system required packages
	select BR2_TARGET_BATOCERA_IMAGES_DEFINITIONS
	select BR2_PACKAGE_BATOCERA_INITRAMFS		# initramfs to boot the system
	select BR2_PACKAGE_BASH				# bash shell, used as the interactive shell
	select BR2_PACKAGE_RNG_TOOLS			if !BR2_PACKAGE_BATOCERA_TARGET_RK3128 # system entropy. Currently disabled for RK3128 due to high CPU impact
	select BR2_PACKAGE_BATOCERA_EMULATIONSTATION	# emulationstation
	select BR2_PACKAGE_ES_THEME_CARBON		# emulationstation theme
	select BR2_PACKAGE_ES_BACKGROUND_MUSICS		# emulationstation musics
	select BR2_PACKAGE_BATOCERA_ES_SYSTEM		# emulation station es_systems.cfg generator + default roms
	select BR2_PACKAGE_BATOCERA_CONFIGGEN		# emulation station external command launcher
	select BR2_PACKAGE_BATOCERA_TRIGGERHAPPY	# multimedia/power buttons
	select BR2_PACKAGE_BATOCERA_UDEV_RULES		# extra udev rules for specifics joysticks/devices
	select BR2_PACKAGE_BATOCERA_USERDATAINIT	# userdata init files
	select BR2_PACKAGE_XOSD				if BR2_PACKAGE_XSERVER_XORG_SERVER # osd information displaying
	select BR2_PACKAGE_BATOCERA_BATTERY_CHECKER	if BR2_PACKAGE_XOSD
	select BR2_PACKAGE_CIFS_UTILS			# required for boot mounts
	select BR2_PACKAGE_BATOCERA_IMAGE		# tools to generate batocera image
	select BR2_TARGET_ROOTFS_SQUASHFS		# tool to generate the target image
	select BR2_PACKAGE_SQUASHFS_XZ			# some squashfs options
	select BR2_PACKAGE_SQUASHFS_ZSTD		# some squashfs options
	select BR2_PACKAGE_DOSFSTOOLS			# fat
	select BR2_PACKAGE_DOSFSTOOLS_FSCK_FAT		# fat
	select BR2_PACKAGE_DOSFSTOOLS_MKFS_FAT		# fat
	select BR2_PACKAGE_EXFAT			# exfat
	select BR2_PACKAGE_EXFAT_UTILS			# exfat
	select BR2_PACKAGE_E2FSPROGS			# ext4
	select BR2_PACKAGE_NTFS_3G			# ntfs
	select BR2_PACKAGE_NTFS_3G_NTFSPROGS		# ntfs
	select BR2_PACKAGE_BTRFS_PROGS			# btrfs
	select BR2_PACKAGE_WINBTRFS			# btrfs
	select BR2_PACKAGE_CONNMAN			# network manager
	select BR2_PACKAGE_CONNMAN_WIFI			# network manager
	select BR2_PACKAGE_CONNMAN_CLIENT		# network manager
	select BR2_PACKAGE_CONNMAN_LOOPBACK		# network manager
	select BR2_PACKAGE_BATOCERA_WPA			# wireless tools
	select BR2_PACKAGE_WIRELESS_REGDB		# wireless regulatory DB
	select BR2_PACKAGE_IW				# wireless country config for regulatoryDB
	select BR2_PACKAGE_WIRELESS_TOOLS		# wireless tools
	select BR2_PACKAGE_WIRELESS_TOOLS_LIB		# wireless tools
	select BR2_PACKAGE_DROPBEAR			# ssh server
	select BR2_PACKAGE_PM_UTILS			# suspend
	select BR2_PACKAGE_QTSIXA_SHANWAN		# ps3 pad
	select BR2_PACKAGE_XARCADE2JSTICK		# keyboard events of the Xarcade Tankstick
	select BR2_PACKAGE_EVSIEVE			# linux tool to manipulate events (like joining them) ; armv8 in 32 bits seems not supported
	select BR2_PACKAGE_UTIL_LINUX_LIBMOUNT		# for util-linux compilation to work (so, may be removed in the future)
	select BR2_PACKAGE_FBDUMP			# tool to capture snapshots from the Linux kernel framebuffer device and write them out as a PPM file
	select BR2_PACKAGE_FBGRAB			# framebuffer screenshot program, capturing the linux frambuffer and converting it to a png-picture
	select BR2_PACKAGE_FBV				# very simple graphic file viewer for the framebuffer console, capable of displaying GIF, JPEG, PNG and BMP files using libungif, libjpeg and libpng
	select BR2_PACKAGE_EUDEV_RULES_GEN		# fork of systemd-udev with the goal of obtaining better compatibility with existing software such as OpenRC and Upstart
	select BR2_PACKAGE_BOOST_ATOMIC			# library that provides atomic data types and operations on these data types
	select BR2_PACKAGE_UTIL_LINUX_LIBSMARTCOLS	# library is used for smart adaptive formatting of tabular data
	select BR2_PACKAGE_UTIL_LINUX_SETTERM		# Set terminal attributes
	select BR2_PACKAGE_OPENVPN			# VPN support
	select BR2_PACKAGE_USB_MODESWITCH		# USB modeswitch support
	select BR2_PACKAGE_UMTOOL			# command line tool for configuring Ultimarc arcade hardware
	select BR2_PACKAGE_PYTHON_HIDAPI		# Communication with USB HID devices via Python
	select BR2_PACKAGE_LEDSPICER			if !BR2_PACKAGE_BATOCERA_TARGET_BCM2835 # LED Manager for Linux
	select BR2_PACKAGE_INNOEXTRACT			# Extract InnoSetup files (useful for Wine and GOG games)
	select BR2_PACKAGE_TREE				# recursive directory listing (useful for generating documentation on rom directory structure)

	# Python and SSL
	select BR2_PACKAGE_HOST_PYTHON3
	select BR2_PACKAGE_HOST_PYTHON3_SSL
	select BR2_PACKAGE_PYTHON3
	select BR2_PACKAGE_PYTHON3_SSL
	select BR2_PACKAGE_PYTHON3_PYOPENSSL

	select BR2_PACKAGE_PARTED				# partition management (for the first boot)
	select BR2_PACKAGE_USBMOUNT				# usb key/sd card mounter
	select BR2_PACKAGE_USBUTILS				# usb key/sd card tools
	select BR2_PACKAGE_BATOCERA_SPLASH			# boot splash
	select BR2_PACKAGE_BATOCERA_SCRIPTS			# batocera scripts
	select BR2_PACKAGE_BATOCERA_RESOLUTION			# batocera resolution
	select BR2_PACKAGE_BATOCERA_SETTINGS			# batocera-settings-get/set
	select BR2_PACKAGE_BATOCERA_AUDIO			if !BR2_PACKAGE_BATOCERA_AUDIO_ALSA # batocera audio-pipewire
	select BR2_PACKAGE_BATOCERA_AUDIO_ALSA			if BR2_PACKAGE_BATOCERA_TARGET_BCM2835 # batocera audio-alsa
	select BR2_PACKAGE_BATOCERA_BLUETOOTH			# batocera bluetooth
	select BR2_PACKAGE_BATOCERA_NOTICE			# boot pdf notice
	select BR2_PACKAGE_BATOCERA_TEST			# batocera test script
	select BR2_PACKAGE_WGET					# download tools
	select BR2_PACKAGE_LIBCURL_CURL				# download tools
	select BR2_PACKAGE_NGHTTP2				# required for curl http2
	select BR2_PACKAGE_CA_CERTIFICATES			# ssl certificates
	select BR2_PACKAGE_ROCKCHIP_RGA				if BR2_PACKAGE_BATOCERA_TARGET_RK3128 # Used for screen rotation (SDL, Retroarch, Moonlight)

	select BR2_PACKAGE_LIBDRM				if !BR2_PACKAGE_BATOCERA_RPI_VCORE
	select BR2_PACKAGE_BATOCERA_DRMINFO			if BR2_PACKAGE_LIBDRM
	select BR2_PACKAGE_LIRC_TOOLS				# lirc (remote control)
	select BR2_PACKAGE_LIBCEC				# libcec
	select BR2_PACKAGE_LIBCEC_LINUX_API			# libcec linux api
	select BR2_PACKAGE_EDID_DECODE				# edid monitor/tv support
	select BR2_PACKAGE_READ_EDID				# edid monitor/tv support
	select BR2_SYSTEM_ENABLE_NLS				# locales
	select BR2_PACKAGE_ACPID				if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY
	select BR2_PACKAGE_AVAHI				# service discovery on local network
	select BR2_PACKAGE_AVAHI_DAEMON				# ping batocera.local
	select BR2_PACKAGE_AVAHI_LIBDNSSD_COMPATIBILITY		# bonjour
	select BR2_PACKAGE_WSDD					# service discovery on local network (windows network neighborhood)
	select BR2_PACKAGE_NTP
	select BR2_PACKAGE_RSYNC
	select BR2_PACKAGE_SAMBA4				# samba
	select BR2_PACKAGE_LIBOPENSSL_BIN			# required to encode the wifi password
	select BR2_PACKAGE_KBD					# loadkeys
	select BR2_PACKAGE_XKEYBOARD_CONFIG			if BR2_PACKAGE_LIBXKBCOMMON # requirement for xkb to work, xkb is used by kodi, even without x for the keyboard
	select BR2_PACKAGE_GESFTPSERVER				# required to access folders via sftp and should be replaced by openssh
	select BR2_PACKAGE_GPTFDISK				# fs resize
	select BR2_PACKAGE_GPTFDISK_SGDISK			# fs resize
	select BR2_PACKAGE_E2FSPROGS				# fs resize
	select BR2_PACKAGE_E2FSPROGS_RESIZE2FS			# fs resize
	select BR2_PACKAGE_PACMAN				# pacman package manager
	select BR2_PACKAGE_FLATPAK				if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY # flatpak app packaging system
	select BR2_PACKAGE_BAUH					if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY # flatpak gui
	select BR2_PACKAGE_RYZENADJ				if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY # ryzen apu configuration
	select BR2_PACKAGE_SYNCTHING				# sync files across multiple batoceras
	select BR2_PACKAGE_RCLONE				if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY # sync files in the cloud (require x86_64)
	select BR2_PACKAGE_BTOP					# htop alternative
	select BR2_PACKAGE_MOKUTIL				if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY # mokutil machine owner key utility

	# Controllers
	select BR2_PACKAGE_XONE					if !BR2_PACKAGE_HOST_LINUX_HEADERS_CUSTOM_4_4 # xbox receiver (require linux >= 4.15)
	select BR2_PACKAGE_XPAD_NOONE				if !BR2_PACKAGE_HOST_LINUX_HEADERS_CUSTOM_4_4 # xbox receiver (require linux >= 4.15)
	select BR2_PACKAGE_XPADNEO				if !BR2_PACKAGE_HOST_LINUX_HEADERS_CUSTOM_4_4 # xbox receiver (require linux >= 4.18)
	select BR2_PACKAGE_WII_U_GC_ADAPTER			if !BR2_PACKAGE_BATOCERA_TARGET_BCM2835 && !BR2_PACKAGE_BATOCERA_TARGET_RK3326 # wii-u-gc-adapter
	select BR2_PACKAGE_WIIMOTES_RULES			if !BR2_PACKAGE_BATOCERA_TARGET_BCM2835 && !BR2_PACKAGE_BATOCERA_TARGET_RK3326 # wiimotes
	select BR2_PACKAGE_WIIMOTE_3RDPARTY			if !BR2_PACKAGE_BATOCERA_TARGET_BCM2835 && !BR2_PACKAGE_BATOCERA_TARGET_RK3326 # some non official wiimotes
	select BR2_PACKAGE_XWIIMOTE				if !BR2_PACKAGE_BATOCERA_TARGET_BCM2835 && !BR2_PACKAGE_BATOCERA_TARGET_RK3326 # a tool to analye wiimote events (mainly to debug, but helps and is funny)
	select BR2_PACKAGE_BATOCERA_GUNS			if !BR2_PACKAGE_BATOCERA_TARGET_BCM2835 && !BR2_PACKAGE_BATOCERA_TARGET_RK3326
	select BR2_PACKAGE_BATOCERA_WHEEL_CALIBRATOR
	select BR2_PACKAGE_NEW_LG4FF				if !BR2_PACKAGE_BATOCERA_TARGET_RK3326 && !BR2_PACKAGE_BATOCERA_TARGET_XU4 && !BR2_PACKAGE_BATOCERA_TARGET_BCM2835 && !BR2_PACKAGE_BATOCERA_TARGET_RK3326 # Improved Linux module driver for Logitech driving wheels (the lg4ff is disabled in kernels)
	select BR2_PACKAGE_HID_NX				if !BR2_PACKAGE_HOST_LINUX_HEADERS_CUSTOM_4_4 && !BR2_PACKAGE_BATOCERA_TARGET_BCM2835 && !BR2_PACKAGE_BATOCERA_TARGET_RK3326 # updated nintendo switch controller driver, requires kernel > 4.4
	select BR2_PACKAGE_JOYCOND				if BR2_PACKAGE_HID_NX # nintendo switch joycon daemon (requires hid-nx)
	select BR2_PACKAGE_JAMMASD

	select BR2_PACKAGE_UPOWER # required by some cemuhook servers

	# Case
	select BR2_PACKAGE_ELEMENT14_PI_DESKTOP		if BR2_PACKAGE_BATOCERA_TARGET_BCM2836 || BR2_PACKAGE_BATOCERA_TARGET_BCM2837 # rpi2/rpi3
	select BR2_PACKAGE_GPICASE			if BR2_PACKAGE_BATOCERA_TARGET_BCM2835 || BR2_PACKAGE_BATOCERA_TARGET_BCM2836 # retroflag gpicase
	select BR2_PACKAGE_ROSHAMBO_CASE		if BR2_PACKAGE_BATOCERA_TARGET_RK3399 # roshambo case
	select BR2_PACKAGE_RPIGPIOSWITCH		if BR2_PACKAGE_BATOCERA_RPI_ANY # gpio switchs
	select BR2_PACKAGE_RETROGAME			if BR2_PACKAGE_BATOCERA_RPI_ANY # gpio pads
	select BR2_PACKAGE_DESKPIPRO_CASE		if BR2_PACKAGE_BATOCERA_TARGET_BCM2711 # deskpi pro case rpi4 only
	select BR2_PACKAGE_PIBOY			if BR2_PACKAGE_BATOCERA_TARGET_BCM2836	|| \
							   BR2_PACKAGE_BATOCERA_TARGET_BCM2837	|| \
							   BR2_PACKAGE_BATOCERA_TARGET_BCM2711 # piboy rpi3/rpi4
	select BR2_PACKAGE_PICADE			if BR2_PACKAGE_BATOCERA_RPI_ANY # picade arcade case
	select BR2_PACKAGE_PIRONMAN			if BR2_PACKAGE_BATOCERA_TARGET_BCM2711 # pironman case is rpi4 only

	# screens
	select BR2_PACKAGE_DMD_SIMULATOR
	select BR2_PACKAGE_DMD_SIMULATOR_PLAYER
	select BR2_PACKAGE_LIBDMDUTIL # dependancy of vpinball, but vpinball is not everywhere
	select BR2_PACKAGE_BATOCERA_BACKGLASS if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY

	# swap
	select BR2_PACKAGE_SWAPIT		if BR2_PACKAGE_BATOCERA_TARGET_RK3128	|| \
						   BR2_PACKAGE_BATOCERA_TARGET_RK3326	|| \
						   BR2_PACKAGE_BATOCERA_TARGET_BCM2835	|| \
						   BR2_PACKAGE_BATOCERA_TARGET_BCM2836	|| \
						   BR2_PACKAGE_BATOCERA_TARGET_BCM2837
	select BR2_PACKAGE_ZRAMSWAP                # swap on zram, optional user-enabled service

	# irq balancing
	select BR2_PACKAGE_IRQBALANCE

	# music support
	select BR2_PACKAGE_BATOCERA_MUSIC_SUPPORT

	# vulkan
	select BR2_PACKAGE_BATOCERA_VULKAN	if  BR2_PACKAGE_BATOCERA_TARGET_X86_ANY	|| \
						    BR2_PACKAGE_BATOCERA_TARGET_BCM2711	|| \
						    BR2_PACKAGE_BATOCERA_TARGET_BCM2712	|| \
						    BR2_PACKAGE_BATOCERA_TARGET_RISCV

	# wireless drivers
	# use the morrownr RTL8812au & RTL8821au drivers
	select BR2_PACKAGE_RTL8812AU		if !BR2_PACKAGE_BATOCERA_TARGET_BCM2835		&& \
						   !BR2_PACKAGE_BATOCERA_TARGET_H3		&& \
						   !BR2_PACKAGE_BATOCERA_TARGET_RK3326		&& \
						   !BR2_PACKAGE_BATOCERA_TARGET_RK3588		&& \
						   !BR2_PACKAGE_BATOCERA_TARGET_RK3128		&& \
						   !BR2_PACKAGE_BATOCERA_TARGET_ODIN

	select BR2_PACKAGE_RTL8821AU_MORROWNR	if BR2_PACKAGE_BATOCERA_TARGET_S922X || BR2_PACKAGE_BATOCERA_TARGET_A3GEN2 || BR2_PACKAGE_BATOCERA_TARGET_X86_ANY
	select BR2_PACKAGE_RTL88X2BU		if BR2_PACKAGE_BATOCERA_TARGET_S922X || BR2_PACKAGE_BATOCERA_TARGET_A3GEN2 || BR2_PACKAGE_BATOCERA_TARGET_X86_ANY
	select BR2_PACKAGE_RTL8723BU		if BR2_PACKAGE_BATOCERA_TARGET_S922X || BR2_PACKAGE_BATOCERA_TARGET_A3GEN2 || BR2_PACKAGE_BATOCERA_TARGET_X86_ANY
	select BR2_PACKAGE_RTL8188EU		if BR2_PACKAGE_BATOCERA_TARGET_S922X || BR2_PACKAGE_BATOCERA_TARGET_A3GEN2 || BR2_PACKAGE_BATOCERA_TARGET_X86_ANY
	select BR2_PACKAGE_RTL8821CU		if BR2_PACKAGE_BATOCERA_TARGET_S922X || BR2_PACKAGE_BATOCERA_TARGET_A3GEN2 || \
						   BR2_PACKAGE_BATOCERA_TARGET_X86_ANY || BR2_PACKAGE_BATOCERA_TARGET_RK3588
	select BR2_PACKAGE_RTL8189ES		if BR2_PACKAGE_BATOCERA_TARGET_S905 || BR2_PACKAGE_BATOCERA_TARGET_S905GEN2 || BR2_PACKAGE_BATOCERA_TARGET_S905GEN3
	select BR2_PACKAGE_RTL8189FS		if BR2_PACKAGE_BATOCERA_TARGET_H3	|| \
						   BR2_PACKAGE_BATOCERA_TARGET_S922X	|| \
						   BR2_PACKAGE_BATOCERA_TARGET_A3GEN2	|| \
						   BR2_PACKAGE_BATOCERA_TARGET_X86_ANY

	# do NOT remove this one for OGA
	select BR2_PACKAGE_RTL8192EU		if !BR2_PACKAGE_BATOCERA_TARGET_BCM2835	&& \
						   !BR2_PACKAGE_BATOCERA_TARGET_H3	&& \
						   !BR2_PACKAGE_BATOCERA_TARGET_RK3128	&& \
						   !BR2_PACKAGE_BATOCERA_TARGET_RK3588

	select BR2_PACKAGE_RTW89_TEMP       	if BR2_PACKAGE_BATOCERA_TARGET_RK3588

	select BR2_PACKAGE_RTL8822CS        	if BR2_PACKAGE_BATOCERA_TARGET_S905GEN3

	# ethernet
	#select BR2_PACKAGE_R8125		if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY
	#select BR2_PACKAGE_R8168		if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY

	# gpu drivers
	select BR2_PACKAGE_BATOCERA_GPU_X86	if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY

	# SDL2
	select BR2_PACKAGE_BATOCERA_SDL2

	# xorg
	select BR2_PACKAGE_BATOCERA_XORG	if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY

	# compression tools
	select BR2_PACKAGE_UNZIP	# for /userdata/system/upgrade/share.zip
	select BR2_PACKAGE_XZ		# for updates
	select BR2_PACKAGE_ZSTD		# for btrfs compression
	select BR2_PACKAGE_LZ4		# for initramfs compression

	# script tool
	select BR2_PACKAGE_DIALOG
	select BR2_PACKAGE_MOSQUITTO # connected object interface (https://wiki.batocera.org/hardware:lcd_led_marquees)

	# tools
	select BR2_PACKAGE_I2C_TOOLS
	select BR2_PACKAGE_MDADM # RAID
	select BR2_PACKAGE_MC
	select BR2_PACKAGE_OD_COMMANDER
	select BR2_PACKAGE_FDUPES
	select BR2_PACKAGE_PYTHON_SERIAL		if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY
	select BR2_PACKAGE_BATOCERA_ETHTOOL
	select BR2_PACKAGE_SMARTMONTOOLS

	# gpio controllers
	select BR2_PACKAGE_DB9_GPIO_RPI					if BR2_PACKAGE_BATOCERA_RPI_ANY
	select BR2_PACKAGE_GAMECON_GPIO_RPI				if BR2_PACKAGE_BATOCERA_RPI_ANY
	select BR2_PACKAGE_MK_ARCADE_JOYSTICK_RPI			if BR2_PACKAGE_BATOCERA_RPI_ANY
	select BR2_PACKAGE_PYTHON_RPI_GPIO				if BR2_PACKAGE_BATOCERA_RPI_ANY && !BR2_PACKAGE_BATOCERA_TARGET_BCM2712
	select BR2_PACKAGE_PYTHON_GPIOZERO				if BR2_PACKAGE_BATOCERA_TARGET_BCM2835 || BR2_PACKAGE_BATOCERA_TARGET_BCM2836
	select BR2_PACKAGE_PYTHON_ADAFRUIT_CIRCUITPYTHON_WS2801		if BR2_PACKAGE_BATOCERA_RPI_ANY && !BR2_PACKAGE_BATOCERA_TARGET_BCM2712
	select BR2_PACKAGE_PYTHON3_GPIOD				if BR2_PACKAGE_BATOCERA_TARGET_BCM2712

	# GPIO kernel driver
	select BR2_PACKAGE_LIBGPIOD		if BR2_PACKAGE_BATOCERA_TARGET_BCM2712	|| \
						  !BR2_PACKAGE_BATOCERA_TARGET_BCM2711	&& \
						  !BR2_PACKAGE_BATOCERA_TARGET_BCM2835	&& \
						  !BR2_PACKAGE_BATOCERA_TARGET_BCM2836	&& \
						  !BR2_PACKAGE_BATOCERA_TARGET_BCM2837	&& \
						   BR2_TOOLCHAIN_HEADERS_AT_LEAST_4_8

	# joy 2 pad
	select BR2_PACKAGE_EVMAPY
	select BR2_PACKAGE_EVMAPY_SYSTEM_CONFIG

	# FUN R1 Gamepad
	select BR2_PACKAGE_FUN_R1_GAMEPAD	if BR2_PACKAGE_BATOCERA_TARGET_S905

	# required gcc flags
	# required for different emulators, i suggest to enable it always to not have different behavior depending on boards
	select BR2_GCC_ENABLE_OPENMP

	# odin wifi baseband dependencies
	select BR2_PACKAGE_PD_MAPPER		if BR2_PACKAGE_BATOCERA_TARGET_ODIN
	select BR2_PACKAGE_QRTR			    if BR2_PACKAGE_BATOCERA_TARGET_ODIN
	select BR2_PACKAGE_RMTFS		    if BR2_PACKAGE_BATOCERA_TARGET_ODIN
	select BR2_PACKAGE_TQFTPSERV		if BR2_PACKAGE_BATOCERA_TARGET_ODIN

	# leds
	select BR2_PACKAGE_AYN_PLATFORM		  if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY
	select BR2_PACKAGE_AYANEO_PLATFORM    if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY

	help
	  Install the batocera.linux system files

config BR2_PACKAGE_BATOCERA_DEV
	bool "add dev options"

	select BR2_PACKAGE_TMUX
	select BR2_PACKAGE_X11VNC	if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY

	help
	  Install dev packages for batocera.linux

config BR2_PACKAGE_BATOCERA_DEBUG
	bool "add debug options"

	select BR2_PACKAGE_STRACE
	select BR2_PACKAGE_VALGRIND
	select BR2_BINUTILS_GPROFNG
	select BR2_PACKAGE_GDB
	select BR2_PACKAGE_GDB_DEBUGGER
	select BR2_PACKAGE_LINUX_TOOLS_PERF
	select BR2_PACKAGE_LINUX_TOOLS_PERF_TUI
	select BR2_PACKAGE_VULKAN_SAMPLES	if BR2_PACKAGE_BATOCERA_VULKAN

	help
	  Install debug packages for batocera.linux

config BR2_TARGET_BATOCERA_IMAGES_DEFINITIONS
	bool "target images definitions"
	config BR2_TARGET_BATOCERA_IMAGES
	string "target images"
	default "amlogic/s905gen2/radxa-zero amlogic/s905gen2/khadas-vim2"				if BR2_PACKAGE_BATOCERA_TARGET_S905GEN2
	default "amlogic/s905gen3/odroidc4 amlogic/s905gen3/khadas-vim3l amlogic/s905gen3/tvbox-gen3"	if BR2_PACKAGE_BATOCERA_TARGET_S905GEN3
	default "amlogic/s9gen4/khadas-vim1s"								if BR2_PACKAGE_BATOCERA_TARGET_S9GEN4
	default "amlogic/a3gen2/khadas-vim4"								if BR2_PACKAGE_BATOCERA_TARGET_A3GEN2
	default "broadcom/bcm2835"									if BR2_PACKAGE_BATOCERA_TARGET_BCM2835
	default "broadcom/bcm2836"									if BR2_PACKAGE_BATOCERA_TARGET_BCM2836
	default "broadcom/bcm2837"									if BR2_PACKAGE_BATOCERA_TARGET_BCM2837
	default "broadcom/bcm2711"									if BR2_PACKAGE_BATOCERA_TARGET_BCM2711
	default "broadcom/bcm2712"									if BR2_PACKAGE_BATOCERA_TARGET_BCM2712
	default "rockchip/rk3326"									if BR2_PACKAGE_BATOCERA_TARGET_RK3326
	default "rockchip/rk3328/rock64 rockchip/rk3328/roc-cc"						if BR2_PACKAGE_BATOCERA_TARGET_RK3328
	default "rockchip/rk3288/tinkerboard rockchip/rk3288/miqi"					if BR2_PACKAGE_BATOCERA_TARGET_RK3288
	default "rockchip/rk3128/ps5000 rockchip/rk3128/ps7000 rockchip/rk3128/powkiddy_a13"		if BR2_PACKAGE_BATOCERA_TARGET_RK3128
	default "allwinner/h5/tritium-h5 allwinner/h5/orangepi-pc2"					if BR2_PACKAGE_BATOCERA_TARGET_H5
	default "allwinner/h6/orangepi-3-lts allwinner/h6/orangepi-3 allwinner/h6/orangepi-one-plus"	if BR2_PACKAGE_BATOCERA_TARGET_H6
	default "allwinner/h616/orangepi-zero2 allwinner/h616/orangepi-zero3 allwinner/h616/x96-mate"	if BR2_PACKAGE_BATOCERA_TARGET_H616
	default "amlogic/s812"										if BR2_PACKAGE_BATOCERA_TARGET_S812
	default "samsung/exynos5422/odroidxu4"								if BR2_PACKAGE_BATOCERA_TARGET_XU4
	default "x86"											if BR2_PACKAGE_BATOCERA_TARGET_X86
	default "x86_64"										if BR2_PACKAGE_BATOCERA_TARGET_X86_64
	default "x86-64-v3"										    if BR2_PACKAGE_BATOCERA_TARGET_ZEN3
	default "qualcomm/sd845/odin"									if BR2_PACKAGE_BATOCERA_TARGET_ODIN
	default "riscv/visionfive2"									if BR2_PACKAGE_BATOCERA_TARGET_RISCV
	default "amlogic/s922x/ogu amlogic/s922x/gtkingpro amlogic/s922x/gtking amlogic/s922x/odroidn2l amlogic/s922x/vim3 amlogic/s922x/odroidn2 amlogic/s922x/odroidn2plus amlogic/s922x/zero2" \
													if BR2_PACKAGE_BATOCERA_TARGET_S922X
	default "amlogic/s905/odroidc2 amlogic/s905/tvbox amlogic/s905/lepotato amlogic/s905/vim amlogic/s905/p201 amlogic/s905/lepotatov2 amlogic/s905/minix-neo-u1" \
													if BR2_PACKAGE_BATOCERA_TARGET_S905
	default "rockchip/rk3399/orangepi-800 rockchip/rk3399/rg552 rockchip/rk3399/rockpro64 rockchip/rk3399/rock960 rockchip/rk3399/orangepi4-lts rockchip/rk3399/rock-pi-4 rockchip/rk3399/nanopi-m4v2 rockchip/rk3399/hugsun-x99" \
													if BR2_PACKAGE_BATOCERA_TARGET_RK3399
	default "rockchip/rk3588/gameforce-ace rockchip/rk3588/rock-5b rockchip/rk3588/rock-5a rockchip/rk3588/quartzpro64 rockchip/rk3588/orangepi-5 rockchip/rk3588/orangepi-5b rockchip/rk3588/orangepi-5-plus rockchip/rk3588/indiedroid-nova rockchip/rk3588/mekotronics-r58 rockchip/rk3588/khadas-edge-2 rockchip/rk3588/firefly-station-m3" \
													if BR2_PACKAGE_BATOCERA_TARGET_RK3588
	default "rockchip/rk3568/odroid-m1 rockchip/rk3568/rock-3a rockchip/rk3568/rock-3c rockchip/rk3568/anbernic-rgxx3 rockchip/rk3568/firefly-station-m2 rockchip/rk3568/firefly-station-p2" \
													if BR2_PACKAGE_BATOCERA_TARGET_RK3568
	default "allwinner/h3/orangepi-pc allwinner/h3/orangepi-one allwinner/h3/orangepi-plus2e allwinner/h3/bananapi-m2-zero allwinner/h3/cha" \
													if BR2_PACKAGE_BATOCERA_TARGET_H3

	choice
	prompt "batocera.linux target"
	default BR2_PACKAGE_BATOCERA_TARGET_BCM2836
	help
	  Select batocera.linux target hardware

# Raspberry
# ---------------------------------------
config BR2_PACKAGE_BATOCERA_TARGET_BCM2835
	bool "bcm2835"

config BR2_PACKAGE_BATOCERA_TARGET_BCM2836
	bool "bcm2836"

config BR2_PACKAGE_BATOCERA_TARGET_BCM2837
	bool "bcm2837"

config BR2_PACKAGE_BATOCERA_TARGET_BCM2711
	bool "bcm2711"

config BR2_PACKAGE_BATOCERA_TARGET_BCM2712
	bool "bcm2712"

# Rockchip
# ---------------------------------------
config BR2_PACKAGE_BATOCERA_TARGET_RK3128
	bool "rk3128"

config BR2_PACKAGE_BATOCERA_TARGET_RK3288
	bool "rk3288"

config BR2_PACKAGE_BATOCERA_TARGET_RK3326
	bool "rk3326"

config BR2_PACKAGE_BATOCERA_TARGET_RK3328
	bool "rk3328"

config BR2_PACKAGE_BATOCERA_TARGET_RK3399
	bool "rk3399"

config BR2_PACKAGE_BATOCERA_TARGET_RK3568
	bool "rk3568"

config BR2_PACKAGE_BATOCERA_TARGET_RK3588
	bool "rk3588"

# Amlogic
# -------------------------------------
config BR2_PACKAGE_BATOCERA_TARGET_S812
	bool "s812"

config BR2_PACKAGE_BATOCERA_TARGET_S905
	bool "s905"

config BR2_PACKAGE_BATOCERA_TARGET_S905GEN2
	bool "s905gen2"

config BR2_PACKAGE_BATOCERA_TARGET_S905GEN3
	bool "s905gen3"

config BR2_PACKAGE_BATOCERA_TARGET_S9GEN4
	bool "s9gen4"

config BR2_PACKAGE_BATOCERA_TARGET_A3GEN2
	bool "a3gen2"

config BR2_PACKAGE_BATOCERA_TARGET_S922X
	bool "s922x"

# Allwinner
# ------------------------------------
config BR2_PACKAGE_BATOCERA_TARGET_H3
	bool "h3"

config BR2_PACKAGE_BATOCERA_TARGET_H5
	bool "h5"

config BR2_PACKAGE_BATOCERA_TARGET_H616
	bool "h616"

config BR2_PACKAGE_BATOCERA_TARGET_H6
	bool "h6"

# PC
# ------------------------------------
config BR2_PACKAGE_BATOCERA_TARGET_X86
	bool "x86"

config BR2_PACKAGE_BATOCERA_TARGET_X86_64
	bool "x86_64"

config BR2_PACKAGE_BATOCERA_TARGET_ZEN3
	bool "x86-64-v3"

# Snapdragon & Samsung
# -------------------------------------
config BR2_PACKAGE_BATOCERA_TARGET_ODIN
	bool "odin"

config BR2_PACKAGE_BATOCERA_TARGET_XU4
	bool "xu4"

# RISCV
# -------------------------------------
config BR2_PACKAGE_BATOCERA_TARGET_RISCV
	bool "riscv"

endchoice

config BR2_PACKAGE_BATOCERA_EXTRAS
	bool "batocera.linux tools packages selection"

	help
	  Tools to extends the batocera system (but not required)

config BR2_PACKAGE_BATOCERA_TOOLS
	bool "batocera.linux system tools packages selection"

	select BR2_PACKAGE_JSTEST2				# joysticks tester
	select BR2_PACKAGE_EVTEST				# joysticks tester
	select BR2_PACKAGE_LINUXCONSOLETOOLS			# tools for linux events calibration
	select BR2_PACKAGE_LINUXCONSOLETOOLS_JOYSTICK		# tools for linux events calibration
	select BR2_PACKAGE_LINUXCONSOLETOOLS_FORCEFEEDBACK 	# tools for linux events calibration
	select BR2_PACKAGE_VIM					# basic vi emulator
	select BR2_PACKAGE_NANO					# basic nano emulator
	select BR2_PACKAGE_ZIP					# zip tool
	select BR2_PACKAGE_P7ZIP				# zip tool
	select BR2_PACKAGE_SQUASHFS				# mksquash tool
	select BR2_PACKAGE_HTOP					# multi-cpus usage
	select BR2_PACKAGE_NCDU					# Disk Usage
	select BR2_PACKAGE_FFMPEG_XCBGRAB			if BR2_PACKAGE_XORG7
	select BR2_PACKAGE_SWITCHRES				if !BR2_PACKAGE_BATOCERA_TARGET_BCM2835 && !BR2_PACKAGE_BATOCERA_WAYLAND # switchres 15kHz
	select BR2_PACKAGE_LIBGPIOD_TOOLS			if BR2_PACKAGE_LIBGPIOD

	help
	  System tools

#### systems ####
config BR2_PACKAGE_BATOCERA_ALL_SYSTEMS
	bool "batocera.linux all emulators packages selection"

	# RetroArch frontend and core data
	select BR2_PACKAGE_BATOCERA_RETROARCH
	select BR2_PACKAGE_BATOCERA_RETROACHIEVEMENTS_SOUNDS

	# Include other systems
	select BR2_PACKAGE_BATOCERA_ARCADE_SYSTEMS
	select BR2_PACKAGE_BATOCERA_CONSOLE_SYSTEMS
	select BR2_PACKAGE_BATOCERA_HANDHELD_SYSTEMS
	select BR2_PACKAGE_BATOCERA_COMPUTER_SYSTEMS
	select BR2_PACKAGE_BATOCERA_MSDOS_SYSTEMS
	select BR2_PACKAGE_BATOCERA_SCUMMVM_SYSTEMS
	select BR2_PACKAGE_BATOCERA_HOMEBREW_SYSTEMS
	select BR2_PACKAGE_BATOCERA_WINE_SYSTEMS
	select BR2_PACKAGE_BATOCERA_GAMESTREAM_SYSTEMS
	select BR2_PACKAGE_BATOCERA_PORTS_SYSTEMS
	select BR2_PACKAGE_BATOCERA_FLASH_SYSTEMS
	select BR2_PACKAGE_BATOCERA_STEAM if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY

	help
	  batocera.linux all supported emulation systems

#### Wine Layer ####
config BR2_PACKAGE_BATOCERA_WINE_SYSTEMS
	bool "batocera.linux Wine support"

	# Wine (windows) layer
	select BR2_PACKAGE_BATOCERA_WINE	if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY
	select BR2_PACKAGE_WINE_X86		if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY

#### Flash Player ####
config BR2_PACKAGE_BATOCERA_FLASH_SYSTEMS
	bool "batocera.linux Flash support"

	# Flash Player Emulator
	select BR2_PACKAGE_RUFFLE		if BR2_PACKAGE_XORG7 && BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY # need to be configured to support crosscompilation
	select BR2_PACKAGE_LIGHTSPARK		if !BR2_PACKAGE_BATOCERA_TARGET_BCM2835

#### Moonlight / Gamestream ####
config BR2_PACKAGE_BATOCERA_GAMESTREAM_SYSTEMS
	bool "batocera.linux game streaming support"

	# Game streaming
	select BR2_PACKAGE_MOONLIGHT_EMBEDDED	if !BR2_PACKAGE_BATOCERA_TARGET_RK3128 && !BR2_PACKAGE_BATOCERA_TARGET_BCM2835

#### ScummVM ####
config BR2_PACKAGE_BATOCERA_SCUMMVM_SYSTEMS
	bool "batocera.linux ScummVM emulators/cores"

	# ScummVM
	select BR2_PACKAGE_SCUMMVM		# ALL
	select BR2_PACKAGE_LIBRETRO_SCUMMVM	# ALL

#### Homebrew ####
config BR2_PACKAGE_BATOCERA_HOMEBREW_SYSTEMS
	bool "batocera.linux homebrew systems"

	# OpenBOR
	select BR2_PACKAGE_OPENBOR4432		# ALL
	#select BR2_PACKAGE_OPENBOR6330		# ALL
	select BR2_PACKAGE_OPENBOR6412		# ALL
	#select BR2_PACKAGE_OPENBOR6510		# ALL
	select BR2_PACKAGE_OPENBOR7142		# ALL
	select BR2_PACKAGE_OPENBOR7530		# ALL

	# Lutro Engine / LÖVE
	select BR2_PACKAGE_LIBRETRO_LUTRO	if !BR2_PACKAGE_BATOCERA_TARGET_H3

	# PyGAME
	select BR2_PACKAGE_BATOCERA_PYGAME	if !BR2_PACKAGE_BATOCERA_TARGET_H3

	# RPG engine : Solarus
	select BR2_PACKAGE_SOLARUS_ENGINE	if !BR2_riscv # LuajIT does not support riscv ?

	# RPG engine : EasyRPG / RPG MAker
	select BR2_PACKAGE_EASYRPG_PLAYER	# standalone
	select BR2_PACKAGE_LIBRETRO_EASYRPG	# libretro core

	# Fantasy consoles
	select BR2_PACKAGE_LIBRETRO_TIC80	# ALL
	select BR2_PACKAGE_LIBRETRO_FAKE08	# ALL
	select BR2_PACKAGE_LEXALOFFLE_PICO8	# ALL
	select BR2_PACKAGE_LEXALOFFLE_VOXATRON	if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY # No engine for ARM yet
	select BR2_PACKAGE_PYTHON_PYXEL		if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY
	select BR2_PACKAGE_LIBRETRO_WASM4	if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY #  Requires X11

	# Fighting games engine
	select BR2_PACKAGE_IKEMEN		if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY

	# SMBX engine
	select BR2_PACKAGE_THEXTECH

#### Sega Dreamcast, Naomi and Atomiswave ####
config BR2_PACKAGE_BATOCERA_SEGADC
	bool "batocera.linux dreamcast/naomi/atomiswave emulators/cores"

	# Dreamcast / Naomi / Atomiswave emulation
	select BR2_PACKAGE_FLYCAST		if !BR2_riscv					&& \
						   !BR2_PACKAGE_BATOCERA_TARGET_BCM2835		&& \
						   !BR2_PACKAGE_BATOCERA_TARGET_BCM2836		&& \
						   !BR2_PACKAGE_BATOCERA_TARGET_BCM2837		&& \
						   !BR2_PACKAGE_BATOCERA_TARGET_RK3326		&& \
						   !BR2_PACKAGE_BATOCERA_TARGET_X86		&& \
						   !BR2_PACKAGE_BATOCERA_TARGET_H3

	select BR2_PACKAGE_LIBRETRO_FLYCAST	if !BR2_riscv					&& \
						   !BR2_PACKAGE_BATOCERA_TARGET_BCM2835		&& \
						   !BR2_PACKAGE_BATOCERA_TARGET_BCM2836		&& \
						   !BR2_PACKAGE_BATOCERA_TARGET_BCM2837		&& \
						   !BR2_PACKAGE_BATOCERA_TARGET_RK3326		&& \
						   !BR2_PACKAGE_BATOCERA_TARGET_H3		&& \
						   !BR2_PACKAGE_BATOCERA_TARGET_H5		&& \
						   !BR2_PACKAGE_BATOCERA_TARGET_H6		&& \
						   !BR2_PACKAGE_BATOCERA_TARGET_X86

	select BR2_PACKAGE_LIBRETRO_FLYCASTVL	if BR2_PACKAGE_BATOCERA_TARGET_BCM2836	|| \
						   BR2_PACKAGE_BATOCERA_TARGET_BCM2837	|| \
						   BR2_PACKAGE_BATOCERA_TARGET_BCM2711	|| \
						   BR2_PACKAGE_BATOCERA_TARGET_BCM2712	|| \
						   BR2_PACKAGE_BATOCERA_TARGET_RK3326	|| \
						   BR2_PACKAGE_BATOCERA_TARGET_H3	|| \
						   BR2_PACKAGE_BATOCERA_TARGET_H5	|| \
						   BR2_PACKAGE_BATOCERA_TARGET_H6


	select BR2_PACKAGE_REDREAM		if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY # Redream not working with Sway

	help
	  Sega Dreamcast and Naomi/Atomiswave emulation support

#### Arcade cores ####
config BR2_PACKAGE_BATOCERA_ARCADE_SYSTEMS
	bool "batocera.linux arcade emulators packages selection"

	# Final Burn Alpha
	select BR2_PACKAGE_LIBRETRO_FBALPHA	if BR2_PACKAGE_BATOCERA_TARGET_BCM2835
	select BR2_PACKAGE_PIFBA		if BR2_PACKAGE_BATOCERA_TARGET_BCM2835

	# Final Burn NEO
	select BR2_PACKAGE_LIBRETRO_FBNEO	# ALL

	# Naomi and Atomiswave
	select BR2_PACKAGE_BATOCERA_SEGADC

	# Demul emulator - multiple Sega arcade systems
	# Disabled until controllers can be resolved under Wine.
	#select BR2_PACKAGE_DEMUL		if BR2_PACKAGE_BATOCERA_WINE

	# Laserdic emulation
	select BR2_PACKAGE_HYPSEUS_SINGE		# ALL

	# Standalone Sega Model 2 emulator
	select BR2_PACKAGE_MODEL2EMU		if BR2_PACKAGE_BATOCERA_WINE

	# Standalone Sega Model 3 emulator
	select BR2_PACKAGE_SUPERMODEL		    if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY
	select BR2_PACKAGE_SUPERMODEL_LEGACY	if BR2_PACKAGE_BATOCERA_XWAYLAND

	# RetroArch MAME derivatives
	select BR2_PACKAGE_LIBRETRO_MAME2003_PLUS	# ALL
	select BR2_PACKAGE_LIBRETRO_IMAME		if BR2_PACKAGE_BATOCERA_TARGET_BCM2835 # IMAME
	select BR2_PACKAGE_LIBRETRO_MAME2010		if !BR2_PACKAGE_BATOCERA_TARGET_BCM2835 # MAME2010
	select BR2_PACKAGE_LIBRETRO_MAME		if !BR2_PACKAGE_BATOCERA_TARGET_BCM2835	&& \
							   !BR2_PACKAGE_BATOCERA_TARGET_H3	&& \
							   !BR2_PACKAGE_BATOCERA_TARGET_RK3128
	select BR2_PACKAGE_LIBRETRO_SAME_CDI		if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY

	# Standalone MAME
	select BR2_PACKAGE_MAME		if BR2_x86_64 || ((BR2_arm || BR2_aarch64 || BR2_RISCV_64) && BR2_PACKAGE_BATOCERA_WAYLAND)

	help
	  Arcade cores/emulators

#### Handheld consoles ####
config BR2_PACKAGE_BATOCERA_HANDHELD_SYSTEMS
	bool "batocera.linux handheld emulation packages"

	# Gameboy / Gameboy Color
	select BR2_PACKAGE_LIBRETRO_GAMBATTE		# ALL
	select BR2_PACKAGE_LIBRETRO_TGBDUAL		# ALL

	# GBA
	select BR2_PACKAGE_LIBRETRO_MGBA		# ALL
	select BR2_PACKAGE_LIBRETRO_VBA_M		if !BR2_PACKAGE_BATOCERA_TARGET_BCM2835 && !BR2_PACKAGE_BATOCERA_TARGET_H3
	select BR2_PACKAGE_LIBRETRO_GPSP		if BR2_PACKAGE_BATOCERA_TARGET_BCM2835 # for slow machines

	# NDS
	select BR2_PACKAGE_LIBRETRO_DESMUME		  if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY

	select BR2_PACKAGE_LIBRETRO_MELONDS		  if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY || (BR2_aarch64 && BR2_PACKAGE_BATOCERA_GLES3)
	select BR2_PACKAGE_LIBRETRO_MELONDS_DS    if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY || BR2_PACKAGE_BATOCERA_XWAYLAND

	select BR2_PACKAGE_DRASTIC			if BR2_PACKAGE_BATOCERA_RPI_MESA3D	|| \
							   BR2_PACKAGE_BATOCERA_TARGET_BCM2712	|| \
							   BR2_PACKAGE_BATOCERA_TARGET_S922X	|| \
							   BR2_PACKAGE_BATOCERA_TARGET_A3GEN2	|| \
							   BR2_PACKAGE_BATOCERA_TARGET_RK3588	|| \
							   BR2_PACKAGE_BATOCERA_TARGET_RK3568	|| \
							   BR2_PACKAGE_BATOCERA_TARGET_RK3326	|| \
							   BR2_PACKAGE_BATOCERA_TARGET_XU4	|| \
							   BR2_PACKAGE_BATOCERA_TARGET_H616	|| \
							   BR2_PACKAGE_BATOCERA_TARGET_H6

	select BR2_PACKAGE_MELONDS			if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY || BR2_PACKAGE_BATOCERA_TARGET_BCM2712

    # 3DS
    select BR2_PACKAGE_CITRA                    if	BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY
    #select BR2_PACKAGE_LIBRETRO_CITRA          if	BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY #disabled, build errors. not well maintained.

	# PSP
	select BR2_PACKAGE_PPSSPP			if !BR2_PACKAGE_BATOCERA_TARGET_BCM2835
	select BR2_PACKAGE_LIBRETRO_PPSSPP		if !BR2_PACKAGE_BATOCERA_TARGET_BCM2835

	# Neo Geo Pocket
	select BR2_PACKAGE_LIBRETRO_BEETLE_NGP		# ALL

	# Atari Lynx
	select BR2_PACKAGE_LIBRETRO_BEETLE_LYNX		# ALL
	select BR2_PACKAGE_LIBRETRO_HANDY		# ALL

	# Wonderswan
	select BR2_PACKAGE_LIBRETRO_BEETLE_WSWAN	# ALL

	# Pokemon Mini
	select BR2_PACKAGE_LIBRETRO_POKEMINI		# ALL

	# Game and Watch
	select BR2_PACKAGE_LIBRETRO_GW			# ALL

	# Watara
	select BR2_PACKAGE_LIBRETRO_WATARA		# ALL

	# SAM Coupe
	select BR2_PACKAGE_SIMCOUPE			# ALL

	# Arduboy
	select BR2_PACKAGE_LIBRETRO_ARDUOUS		# ALL

	# Sony PS Vita
	select BR2_PACKAGE_VITA3K			if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY

	# MegaDuck
	select BR2_PACKAGE_LIBRETRO_SAMEDUCK		# ALL

	help
	  Handheld cores/emulators

#### MSDOS emulation ####
config BR2_PACKAGE_BATOCERA_MSDOS_SYSTEMS
	bool "batocera.linux MS/DOS emulation packages"

	select BR2_PACKAGE_DOSBOX				if  BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY # || BR2_PACKAGE_BATOCERA_TARGET_BCM2711 # Need libGLEW

	select BR2_PACKAGE_DOSBOX_X				if !BR2_PACKAGE_BATOCERA_TARGET_RK3326	&& \
								   !BR2_PACKAGE_BATOCERA_TARGET_BCM2835	&& \
								   !BR2_PACKAGE_BATOCERA_TARGET_BCM2836	&& \
								   !BR2_PACKAGE_BATOCERA_TARGET_BCM2837	&& \
								   !BR2_PACKAGE_BATOCERA_TARGET_RK3399	&& \
								   !BR2_PACKAGE_BATOCERA_TARGET_RK3128	&& \
								   !BR2_PACKAGE_BATOCERA_TARGET_H3	# dos

	select BR2_PACKAGE_DOSBOX_STAGING			if  !BR2_PACKAGE_BATOCERA_TARGET_BCM2835 && !BR2_PACKAGE_BATOCERA_TARGET_H3
	select BR2_PACKAGE_LIBRETRO_DOSBOX_PURE			# ALL

	help
	 MS/DOS cores/emulators

#### Linux / Libretro ports ####
config BR2_PACKAGE_BATOCERA_PORTS_SYSTEMS
	bool "batocera.linux ports packages"

	# DevilutionX (Diablo 1)
	select BR2_PACKAGE_DEVILUTIONX			if !BR2_PACKAGE_BATOCERA_TARGET_BCM2835

	# Cannonball (OutRun)
	select BR2_PACKAGE_CANNONBALL			# ALL

	# PrBoom (Doom)
	select BR2_PACKAGE_LIBRETRO_PRBOOM		# ALL

	# TyrQuake (Quake 1)
	select BR2_PACKAGE_LIBRETRO_TYRQUAKE		if !BR2_PACKAGE_BATOCERA_TARGET_BCM2835

	# NxEngine (Cave Story)
	select BR2_PACKAGE_LIBRETRO_NXENGINE		# ALL

	# MrBoom (Bomberman clone)
	select BR2_PACKAGE_LIBRETRO_MRBOOM		# ALL

	# Prince of Persia
	select BR2_PACKAGE_SDLPOP			if !BR2_PACKAGE_BATOCERA_TARGET_BCM2835

	# Xash3D-FWGS (Half-Life 1)
	select BR2_PACKAGE_XASH3D_FWGS			if !BR2_PACKAGE_BATOCERA_TARGET_BCM2835

	# Commander Genius (Commander Keen series)
	select BR2_PACKAGE_CGENIUS			if !BR2_PACKAGE_BATOCERA_TARGET_BCM2835

	# Rick Dangerous
	select BR2_PACKAGE_LIBRETRO_XRICK		if !BR2_PACKAGE_BATOCERA_TARGET_BCM2835

	# Flashback
	select BR2_PACKAGE_LIBRETRO_REMINISCENCE	if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY || BR2_aarch64 || BR2_riscv

	# Super Flappy Birds
	# select BR2_PACKAGE_LIBRETRO_SUPERFLAPPYBIRDS	if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY

	# Zelda Classic
	select BR2_PACKAGE_LIBRETRO_ZC210		# ALL

	# Dinothwar
	# select BR2_PACKAGE_LIBRETRO_DINOTHAWR		if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY

	# Minecraft mini-clone
	# select BR2_PACKAGE_LIBRETRO_CRAFT		if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY || BR2_PACKAGE_BATOCERA_TARGET_BCM2712

	# ChaiScript engine
	# select BR2_PACKAGE_LIBRETRO_CHAILOVE		if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY

	select BR2_PACKAGE_LIBRETRO_LOWRESNX		# ALL

	select BR2_PACKAGE_ABUSE			if  !BR2_PACKAGE_BATOCERA_TARGET_BCM2835

	select BR2_PACKAGE_LIBRETRO_VITAQUAKE2		if BR2_PACKAGE_BATOCERA_GLES3

	# Super Mario War
	select BR2_PACKAGE_LIBRETRO_SUPERBROSWAR	if  !BR2_PACKAGE_BATOCERA_TARGET_BCM2835

	# EDuke32 requires OpenGL or GLES 3.0
	select BR2_PACKAGE_EDUKE32			if BR2_PACKAGE_BATOCERA_GLES3

	# GZDoom and Raze require both 64-bit arch (x86,arm,riscv,....) AND OpenGL or GLES 3.0
	select BR2_PACKAGE_GZDOOM			if BR2_ARCH_IS_64 && BR2_PACKAGE_BATOCERA_GLES3
	select BR2_PACKAGE_RAZE				if BR2_ARCH_IS_64 && BR2_PACKAGE_BATOCERA_GLES3

	# ZMusic: standalone library used by gzdoom and raze source ports
	select BR2_PACKAGE_ZMUSIC			if BR2_PACKAGE_GZDOOM || BR2_PACKAGE_RAZE

	# Boom3 (Doom 3)
	select BR2_PACKAGE_LIBRETRO_BOOM3		if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY || BR2_PACKAGE_BATOCERA_TARGET_BCM2712

	# OpenLara (Tomb Raider)
	select BR2_PACKAGE_LIBRETRO_OPENLARA		if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY

	# Quake 3
	select BR2_PACKAGE_IOQUAKE3			if !BR2_PACKAGE_BATOCERA_TARGET_BCM2835	&& \
							   !BR2_PACKAGE_BATOCERA_TARGET_H6	&& \
							   !BR2_PACKAGE_BATOCERA_TARGET_RK3128	&& \
							   !BR2_PACKAGE_BATOCERA_TARGET_RK3326	&& \
							   !BR2_PACKAGE_BATOCERA_TARGET_RISCV	&& \
							   !BR2_PACKAGE_BATOCERA_TARGET_ODIN

	# Hydra Castle Labyrinth
	select BR2_PACKAGE_HCL				# ALL

	# C-Dogs SDL
	select BR2_PACKAGE_CDOGS			# ALL

	# Turrican clone
	select BR2_PACKAGE_HURRICAN			# ALL

	# OpenTyrian (shmup game)
	select BR2_PACKAGE_TYRIAN			# ALL

	# CorsixTH (Theme Hospital engine)
	select BR2_PACKAGE_CORSIXTH			if BR2_x86_64 || BR2_aarch64 || BR2_riscv

	# The Force Engine
	select BR2_PACKAGE_THEFORCEENGINE		if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY # Requires OpenGL 3.3 or later

	# Return to Castle Wolfenstein
	select BR2_PACKAGE_IORTCW			if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY || (BR2_aarch64 && BR2_PACKAGE_BATOCERA_GLES3)

	# Fallout 1 open source engine
	select BR2_PACKAGE_FALLOUT1_CE			# ALL

	# Fallout 2 open source engine
	select BR2_PACKAGE_FALLOUT2_CE			# ALL

	# Descent 1 & 2 open source engine
	select BR2_PACKAGE_DXX_REBIRTH			if BR2_x86_64

	# Wolfenstein: Enemy Territory
	select BR2_PACKAGE_ETLEGACY    if BR2_x86_64 || BR2_PACKAGE_BATOCERA_XWAYLAND

	# Sonic 3 A.I.R. (Angel Island Revisited)
	select BR2_PACKAGE_SONIC3_AIR    if BR2_x86_64 || BR2_PACKAGE_BATOCERA_XWAYLAND

	# Sonic Mania
	select BR2_PACKAGE_SONIC_MANIA    if BR2_x86_64 || BR2_PACKAGE_BATOCERA_XWAYLAND

	# Ur-Quan Masters
	select BR2_PACKAGE_UQM					# ALL

	help
	  Ports

#### Vintage computer systems ####
config BR2_PACKAGE_BATOCERA_COMPUTER_SYSTEMS
	bool "batocera.linux vintage computers emulation packages"

	# CAPS image support (IPF)
	select BR2_PACKAGE_LIBCAPSIMAGE		# ALL

	# Commodore 64/128/VIC20/PET/Plus4
	select BR2_PACKAGE_VICE			if !BR2_PACKAGE_BATOCERA_TARGET_BCM2835
	select BR2_PACKAGE_LIBRETRO_VICE	# ALL

	# Commodore Amiga
	select BR2_PACKAGE_AMIBERRY		if !BR2_PACKAGE_BATOCERA_TARGET_BCM2835
	select BR2_PACKAGE_FSUAE		if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY
	select BR2_PACKAGE_LIBRETRO_PUAE	if !BR2_PACKAGE_BATOCERA_TARGET_BCM2835 && !BR2_PACKAGE_BATOCERA_TARGET_H3
	select BR2_PACKAGE_LIBRETRO_PUAE2021	if !BR2_PACKAGE_BATOCERA_TARGET_BCM2835 && !BR2_PACKAGE_BATOCERA_TARGET_H3
	select BR2_PACKAGE_LIBRETRO_UAE4ARM	if !BR2_PACKAGE_BATOCERA_TARGET_BCM2835 && (BR2_arm || BR2_aarch64)

	# Atari 800 computers
	select BR2_PACKAGE_LIBRETRO_ATARI800	# ALL

	# Sinclair ZX Spectrum
	select BR2_PACKAGE_LIBRETRO_FUSE	# ALL

	# Amstrad CPC
	select BR2_PACKAGE_LIBRETRO_CAP32	# ALL
	select BR2_PACKAGE_LIBRETRO_81		# ALL

	# Atari ST/TT/Falcon
	select BR2_PACKAGE_HATARI		if !BR2_PACKAGE_BATOCERA_TARGET_BCM2835
	select BR2_PACKAGE_LIBRETRO_HATARI	# ALL
	select BR2_PACKAGE_LIBRETRO_HATARIB	if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY

	# MSX range
	select BR2_PACKAGE_LIBRETRO_BLUEMSX	# ALL
	select BR2_PACKAGE_LIBRETRO_FMSX	# ALL
	select BR2_PACKAGE_OPENMSX		if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY

	# Thomson 8-bit
	select BR2_PACKAGE_LIBRETRO_THEODORE	# ALL

	# Japanese PC clones
	select BR2_PACKAGE_LIBRETRO_PC88	# ALL
	select BR2_PACKAGE_LIBRETRO_PC98	# ALL

	# Sharp X68000 computer
	select BR2_PACKAGE_LIBRETRO_PX68K	# ALL

	# Sharp X1 computer
	select BR2_PACKAGE_LIBRETRO_XMIL	# ALL

	# Fujistu FM-Towns computers range
	select BR2_PACKAGE_TSUGARU		if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY || BR2_PACKAGE_BATOCERA_TARGET_BCM2712

	# Macintosh
	select BR2_PACKAGE_LIBRETRO_MINIVMAC	# ALL

	help
	  Old computers

config BR2_PACKAGE_BATOCERA_RETROARCH
	bool "batocera.linux RetroArch frontend and integration"

	# RetroArch frontend and core data
	select BR2_PACKAGE_RETROARCH
	select BR2_PACKAGE_BATOCERA_BEZEL
	select BR2_PACKAGE_BATOCERA_CONTROLLER_OVERLAYS
	select BR2_PACKAGE_BATOCERA_SHADERS

config BR2_PACKAGE_BATOCERA_CONSOLE_SYSTEMS
	bool "batocera.linux console emulators/cores"

	# Nintendo 64
	select BR2_PACKAGE_BATOCERA_MUPEN64		if !BR2_PACKAGE_BATOCERA_TARGET_BCM2835 # mupen64 (n64) runs too slow on these platforms

	select BR2_PACKAGE_LIBRETRO_MUPEN64PLUS_NEXT	if !BR2_riscv && !BR2_PACKAGE_BATOCERA_TARGET_BCM2835 && !BR2_PACKAGE_BATOCERA_TARGET_H3 && !BR2_PACKAGE_BATOCERA_TARGET_H5

	select BR2_PACKAGE_LIBRETRO_PARALLEL_N64	if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY	|| \
							   BR2_PACKAGE_BATOCERA_TARGET_RK3399		|| \
							   BR2_PACKAGE_BATOCERA_TARGET_RK3288		|| \
							   BR2_PACKAGE_BATOCERA_TARGET_RK3128		|| \
							   BR2_PACKAGE_BATOCERA_TARGET_S905GEN2		|| \
							   BR2_PACKAGE_BATOCERA_TARGET_S905GEN3		|| \
							   BR2_PACKAGE_BATOCERA_TARGET_RK3588		|| \
							   BR2_PACKAGE_BATOCERA_TARGET_S922X		|| \
							   BR2_PACKAGE_BATOCERA_TARGET_A3GEN2		|| \
							   BR2_PACKAGE_BATOCERA_TARGET_BCM2712

	# Dreamcast
	select BR2_PACKAGE_BATOCERA_SEGADC

	# PSX
	select BR2_PACKAGE_DUCKSTATION			if BR2_PACKAGE_BATOCERA_GLES3 && !BR2_PACKAGE_BATOCERA_TARGET_RK3326 # newer versions of duckstation are stricter on OpenGL 3.1

	select BR2_PACKAGE_DUCKSTATION_LEGACY		if !BR2_PACKAGE_BATOCERA_GLES3			&& \
							   !BR2_riscv					&& \
							   !BR2_PACKAGE_BATOCERA_TARGET_BCM2835		&& \
							   !BR2_PACKAGE_BATOCERA_TARGET_H3		&& \
							   !BR2_PACKAGE_BATOCERA_TARGET_RK3326		&& \
							   !BR2_PACKAGE_BATOCERA_TARGET_RK3128

	select BR2_PACKAGE_LIBRETRO_SWANSTATION		if !BR2_riscv					&& \
							   !BR2_PACKAGE_BATOCERA_TARGET_X86		&& \
							   !BR2_PACKAGE_BATOCERA_TARGET_H3		&& \
							   !BR2_PACKAGE_BATOCERA_TARGET_BCM2835

	select BR2_PACKAGE_LIBRETRO_PCSX		# All

	select BR2_PACKAGE_LIBRETRO_BEETLE_PSX		if !BR2_PACKAGE_BATOCERA_TARGET_H3	&& \
							   !BR2_PACKAGE_BATOCERA_TARGET_RK3326	&& \
							(!BR2_PACKAGE_BATOCERA_RPI_ANY || BR2_PACKAGE_BATOCERA_TARGET_BCM2712)


	# Saturn
	select BR2_PACKAGE_LIBRETRO_BEETLE_SATURN	if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY || BR2_PACKAGE_BATOCERA_TARGET_BCM2712

	select BR2_PACKAGE_LIBRETRO_KRONOS		if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY

	select BR2_PACKAGE_LIBRETRO_YABASANSHIRO	if !BR2_riscv && \
							(BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY || BR2_PACKAGE_BATOCERA_GLES3)

	# Gamecube / Wii
	select BR2_PACKAGE_DOLPHIN_EMU			if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY || BR2_PACKAGE_BATOCERA_TARGET_BCM2712

	select BR2_PACKAGE_LIBRETRO_DOLPHIN		if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY	|| \
							   BR2_PACKAGE_BATOCERA_TARGET_BCM2712		|| \
							   BR2_PACKAGE_BATOCERA_TARGET_S922X		|| \
							   BR2_PACKAGE_BATOCERA_TARGET_A3GEN2		|| \
							   BR2_PACKAGE_BATOCERA_TARGET_RK3588

	select BR2_PACKAGE_SUYU				if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY && BR2_PACKAGE_BATOCERA_CORES_STILL_COMMERCIALIZED
	select BR2_PACKAGE_RYUJINX			if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY && BR2_PACKAGE_BATOCERA_CORES_STILL_COMMERCIALIZED

	# Triforce
	select BR2_PACKAGE_DOLPHIN_TRIFORCE		if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY

	# Microsoft XBOX
	select BR2_PACKAGE_XEMU				if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY

	# Microsoft Xbox 360
	select BR2_PACKAGE_XENIA			if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY && BR2_PACKAGE_BATOCERA_WINE_SYSTEMS
	select BR2_PACKAGE_XENIA_CANARY			if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY && BR2_PACKAGE_BATOCERA_WINE_SYSTEMS

	# Sony PS2
	select BR2_PACKAGE_PCSX2			if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY
	select BR2_PACKAGE_LIBRETRO_PCSX2		if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY
	select BR2_PACKAGE_PLAY				if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY # disabled until play optimised -> || BR2_PACKAGE_BATOCERA_TARGET_BCM2712
	select BR2_PACKAGE_LIBRETRO_PLAY		if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY # disabled until play optimised -> || BR2_PACKAGE_BATOCERA_TARGET_BCM2712

	# Sony PS3
	select BR2_PACKAGE_RPCS3			if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY

	# Wii U
	select BR2_PACKAGE_CEMU				if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY

	# future pinball
	select BR2_PACKAGE_FPINBALL			if BR2_PACKAGE_BATOCERA_WINE
	select BR2_PACKAGE_VPINBALL			if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY || BR2_PACKAGE_BATOCERA_TARGET_RK3588

	# Panasonic 3DO
	select BR2_PACKAGE_LIBRETRO_OPERA		if !BR2_PACKAGE_BATOCERA_TARGET_BCM2835		&& \
							   !BR2_PACKAGE_BATOCERA_TARGET_BCM2836		&& \
							   !BR2_PACKAGE_BATOCERA_TARGET_BCM2837		&& \
							   !BR2_PACKAGE_BATOCERA_TARGET_S905		&& \
							   !BR2_PACKAGE_BATOCERA_TARGET_S905GEN3	&& \
							   !BR2_PACKAGE_BATOCERA_TARGET_H3		&& \
							   !BR2_PACKAGE_BATOCERA_TARGET_RK3326		&& \
							   !BR2_PACKAGE_BATOCERA_TARGET_H616		&& \
							   !BR2_PACKAGE_BATOCERA_TARGET_H6


	# Atari Jaguar
	select BR2_PACKAGE_LIBRETRO_VIRTUALJAGUAR	if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY	|| \
							   BR2_PACKAGE_BATOCERA_TARGET_BCM2712	|| \
							   BR2_PACKAGE_BATOCERA_TARGET_S922X	|| \
							   BR2_PACKAGE_BATOCERA_TARGET_A3GEN2	|| \
							   BR2_PACKAGE_BATOCERA_TARGET_RK3588

	select BR2_PACKAGE_BIGPEMU			if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY

	# NEC PC-FX
	select BR2_PACKAGE_LIBRETRO_BEETLE_PCFX		if !BR2_riscv					&& \
							   !BR2_PACKAGE_BATOCERA_TARGET_BCM2835		&& \
							   !BR2_PACKAGE_BATOCERA_TARGET_BCM2836		&& \
							   !BR2_PACKAGE_BATOCERA_TARGET_BCM2837		&& \
							   !BR2_PACKAGE_BATOCERA_TARGET_H3		&& \
							   !BR2_PACKAGE_BATOCERA_TARGET_RK3326		&& \
							   !BR2_PACKAGE_BATOCERA_TARGET_S905		&& \
							   !BR2_PACKAGE_BATOCERA_TARGET_H5		&& \
							   !BR2_PACKAGE_BATOCERA_TARGET_H616		&& \
							   !BR2_PACKAGE_BATOCERA_TARGET_H6


	# SNK Neo Geo CD
	select BR2_PACKAGE_LIBRETRO_NEOCD		# ALL

	# Nintendo Virtual Boy
	select BR2_PACKAGE_LIBRETRO_BEETLE_VB		# ALL

	# Sega 8-bit/16-range (Mark III / Master System, Game Gear, Genesis / Megadrive, SegaCD / MegaCD, 32X)
	select BR2_PACKAGE_LIBRETRO_PICODRIVE		# ALL
	select BR2_PACKAGE_LIBRETRO_GENESISPLUSGX	# ALL
	select BR2_PACKAGE_LIBRETRO_GENESISPLUSGX_WIDE	if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY
	select BR2_PACKAGE_LIBRETRO_BLASTEM		if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY
	select BR2_PACKAGE_LIBRETRO_SMSPLUS_GX		# ALL
	select BR2_PACKAGE_LIBRETRO_GEARSYSTEM		# ALL

	# Atari 2600
	select BR2_PACKAGE_LIBRETRO_STELLA		# ALL
	select BR2_PACKAGE_LIBRETRO_STELLA2014		if BR2_PACKAGE_BATOCERA_TARGET_BCM2835

	# Atari 5200
	select BR2_PACKAGE_LIBRETRO_A5200		# ALL

	# NEC PC-Engine / TurboGrafx / SuperGrafx range
	select BR2_PACKAGE_LIBRETRO_BEETLE_PCE		if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY
	select BR2_PACKAGE_LIBRETRO_BEETLE_PCE_FAST	# ALL
	select BR2_PACKAGE_LIBRETRO_BEETLE_SUPERGRAFX	# ALL

	# Vectrex
	select BR2_PACKAGE_LIBRETRO_VECX		# ALL

	# Magnavox Odyssey
	select BR2_PACKAGE_LIBRETRO_O2EM		# ALL

	# Intellivision
	select BR2_PACKAGE_LIBRETRO_FREEINTV		# ALL

	# Nintendo NES / Famicom
	select BR2_PACKAGE_LIBRETRO_FCEUMM		# ALL
	select BR2_PACKAGE_LIBRETRO_NESTOPIA		# ALL
	select BR2_PACKAGE_LIBRETRO_MESEN		if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY	|| \
							   BR2_PACKAGE_BATOCERA_TARGET_RK3399		|| \
							   BR2_PACKAGE_BATOCERA_TARGET_RK3588		|| \
							   BR2_PACKAGE_BATOCERA_TARGET_S905GEN3		|| \
							   BR2_PACKAGE_BATOCERA_TARGET_S922X		|| \
							   BR2_PACKAGE_BATOCERA_TARGET_A3GEN2		|| \
							   BR2_PACKAGE_BATOCERA_TARGET_BCM2711		|| \
							   BR2_PACKAGE_BATOCERA_TARGET_BCM2712		|| \
							   BR2_PACKAGE_BATOCERA_TARGET_RK3288

	# Super Nintendo / Super Famicom
	select BR2_PACKAGE_LIBRETRO_SNES9X		if !BR2_PACKAGE_BATOCERA_TARGET_BCM2835
	select BR2_PACKAGE_LIBRETRO_SNES9X_NEXT		if !BR2_PACKAGE_BATOCERA_TARGET_BCM2835
	select BR2_PACKAGE_LIBRETRO_POCKETSNES		if BR2_PACKAGE_BATOCERA_TARGET_BCM2835 || BR2_PACKAGE_BATOCERA_TARGET_H3 \
	|| BR2_PACKAGE_BATOCERA_TARGET_BCM2836
	select BR2_PACKAGE_LIBRETRO_BSNES		if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY	|| \
							   BR2_PACKAGE_BATOCERA_TARGET_BCM2711		|| \
							   BR2_PACKAGE_BATOCERA_TARGET_BCM2712		|| \
							   BR2_PACKAGE_BATOCERA_TARGET_RK3588		|| \
							   BR2_PACKAGE_BATOCERA_TARGET_S922X		|| \
							   BR2_PACKAGE_BATOCERA_TARGET_A3GEN2

	select BR2_PACKAGE_LIBRETRO_BSNES_HD            if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY
	select BR2_PACKAGE_LIBRETRO_MESENS              if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY	|| \
							   BR2_PACKAGE_BATOCERA_TARGET_S922X		|| \
							   BR2_PACKAGE_BATOCERA_TARGET_BCM2712		|| \
							   BR2_PACKAGE_BATOCERA_TARGET_RK3588		|| \
							   BR2_PACKAGE_BATOCERA_TARGET_RK3399		|| \
							   BR2_PACKAGE_BATOCERA_TARGET_A3GEN2

	# Atari 7800
	select BR2_PACKAGE_LIBRETRO_PROSYSTEM		# ALL

	# Fairchild Channel F
	select BR2_PACKAGE_LIBRETRO_FREECHAF		# ALL

	# ECWolf
	# select BR2_PACKAGE_LIBRETRO_ECWOLF		# ALL
	select BR2_PACKAGE_ECWOLF			if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY || BR2_aarch64

	# Sonic Retro Engine
	select BR2_PACKAGE_SONIC2013			# ALL
	select BR2_PACKAGE_SONICCD			# ALL

	# Super Cassette Vision
	select BR2_PACKAGE_LIBRETRO_EMUSCV		# ALL

	# Apple 2 GS
	select BR2_PACKAGE_GSPLUS			# ALL

	# Uzebox
	select BR2_PACKAGE_LIBRETRO_UZEM		if !BR2_PACKAGE_BATOCERA_TARGET_H3 # speed issue on weak SBCs

	help
	  All avaible systems for the selected architecture

config BR2_PACKAGE_BATOCERA_MUPEN64
	bool "batocera.linux Mupen64 packages selection"

	# Core module
	select BR2_PACKAGE_MUPEN64PLUS_CORE

	# Console (command-line) front-end user interface
	select BR2_PACKAGE_MUPEN64PLUS_UI_CONSOLE

	# Input plugin
	select BR2_PACKAGE_MUPEN64PLUS_INPUT_SDL

	# RSP processor plugin
	select BR2_PACKAGE_MUPEN64PLUS_RSP_HLE

	# Audio plugin
	select BR2_PACKAGE_MUPEN64PLUS_AUDIO_SDL

	# Video plugin
	select BR2_PACKAGE_MUPEN64PLUS_VIDEO_GLIDE64MK2
	select BR2_PACKAGE_MUPEN64PLUS_GLIDEN64
	select BR2_PACKAGE_MUPEN64PLUS_VIDEO_RICE	if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY || BR2_PACKAGE_BATOCERA_GLES3

	help
	  Mupen64

#### Cores Experimental ####
config BR2_PACKAGE_BATOCERA_CORES_EXPERIMENTAL
	bool "add experimental cores"

	# Jazz Jackrabbit
	select BR2_PACKAGE_OPENJAZZ		# ALL

	# Free Heroes of Might & Magic 2 engine
	select BR2_PACKAGE_FHEROES2		# ALL

	# HoMM3 open source engine
	select BR2_PACKAGE_VCMI			if BR2_x86_64				|| \
						   BR2_PACKAGE_BATOCERA_TARGET_BCM2711	|| \
						   BR2_PACKAGE_BATOCERA_TARGET_BCM2712	|| \
						   BR2_PACKAGE_BATOCERA_TARGET_S922X	|| \
						   BR2_PACKAGE_BATOCERA_TARGET_RK3568	|| \
						   BR2_PACKAGE_BATOCERA_TARGET_H616

	# Amstrad CPC emulator
	select BR2_PACKAGE_SUGARBOX		if BR2_x86_64				|| \
						   BR2_PACKAGE_BATOCERA_TARGET_BCM2711	|| \
						   BR2_PACKAGE_BATOCERA_TARGET_BCM2712	|| \
						   BR2_PACKAGE_BATOCERA_TARGET_S922X	|| \
						   BR2_PACKAGE_BATOCERA_TARGET_RK3568	|| \
						   BR2_PACKAGE_BATOCERA_TARGET_H616

	# Symbian OS / Nokia N-Gage emulator
	select BR2_PACKAGE_EKA2L1		if BR2_x86_64				|| \
						   BR2_PACKAGE_BATOCERA_TARGET_BCM2711	|| \
						   BR2_PACKAGE_BATOCERA_TARGET_BCM2712	|| \
						   BR2_PACKAGE_BATOCERA_TARGET_S922X	|| \
						   BR2_PACKAGE_BATOCERA_TARGET_RK3568	|| \
						   BR2_PACKAGE_BATOCERA_TARGET_H616

	# Supermodel OpenGL ES port
	select BR2_PACKAGE_SUPERMODEL_ES	if BR2_PACKAGE_BATOCERA_TARGET_BCM2711	|| \
						   BR2_PACKAGE_BATOCERA_TARGET_BCM2712	|| \
						   BR2_PACKAGE_BATOCERA_TARGET_S922X	|| \
						   BR2_PACKAGE_BATOCERA_TARGET_RK3568	|| \
						   BR2_PACKAGE_BATOCERA_TARGET_H616

	# Apple 2
	select BR2_PACKAGE_APPLEWIN		# ALL

	# Standalone Stella
	select BR2_PACKAGE_STELLA		if !BR2_PACKAGE_BATOCERA_TARGET_BCM2835

	# Standalone SNES9X (Qt6)
	select BR2_PACKAGE_SNES9X		if BR2_x86_64				|| \
						   BR2_PACKAGE_BATOCERA_TARGET_BCM2711	|| \
						   BR2_PACKAGE_BATOCERA_TARGET_BCM2712	|| \
						   BR2_PACKAGE_BATOCERA_TARGET_S922X	|| \
						   BR2_PACKAGE_BATOCERA_TARGET_RK3568	|| \
						   BR2_PACKAGE_BATOCERA_TARGET_H616

	help
	  Emulators under development (Experimental)

config BR2_PACKAGE_BATOCERA_GUNS
	bool "batocera guns support"
	select BR2_PACKAGE_AIMTRAK_GUNS				# aimtrak guns
	select BR2_PACKAGE_SAMCO_GUNS				# samco guns
	select BR2_PACKAGE_FUSION_LIGHTGUNS			# fusion lightguns
	select BR2_PACKAGE_DOLPHINBAR_GUNS			# dolphinbar guns
	select BR2_PACKAGE_SINDEN_GUNS				# sinden guns
	select BR2_PACKAGE_AELIGHTGUN				# ae light gun
	select BR2_PACKAGE_GUN4IR_GUNS				# gun4ir guns
	select BR2_PACKAGE_RETROSHOOTER_GUNS			# retroshooter guns
	select BR2_PACKAGE_GUNCON				if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY || BR2_PACKAGE_BATOCERA_TARGET_BCM2711 || BR2_PACKAGE_BATOCERA_TARGET_BCM2837 # guncon
	select BR2_PACKAGE_GUNCON3				if !BR2_PACKAGE_HOST_LINUX_HEADERS_CUSTOM_4_4 # guncon3
	select BR2_PACKAGE_LIGHTGUNS_GAMES_PRECALIBRATIONS
	select BR2_PACKAGE_DOLPHINCROSSHAIRSPACK		if BR2_PACKAGE_DOLPHIN_EMU
	select BR2_PACKAGE_STEAMDECKGUN				if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY

config BR2_PACKAGE_BATOCERA_KODI20
	bool "batocera.linux Kodi 20 packages selection"
	default n
	select BR2_PACKAGE_KODI				# kodi
	select BR2_PACKAGE_PYTHON_PYOPENSSL		# used by some kodi plugins
	select BR2_PACKAGE_X264				# decoder
	select BR2_PACKAGE_X265				# decoder
	select BR2_PACKAGE_LIBAACS			# decoder

	select BR2_PACKAGE_GNUTLS			# https streams

	# Kodi disc decoding
	select BR2_PACKAGE_LIBDVDCSS			# decoder
	select BR2_PACKAGE_LIBUDFREAD			# Bluray

	# Kodi game controllers
	select BR2_PACKAGE_KODI_PERIPHERAL_JOYSTICK	# joysticks for kodi
	select BR2_PACKAGE_KODI_PERIPHERAL_XARCADE	# xarcade for kodi

	# ffmpeg enabler that i'm not sure it has an impact on kodi
	select BR2_PACKAGE_FFMPEG_GPL			# video recording
	select BR2_PACKAGE_FFMPEG_FFPROBE		# determine the audio&video characteristics of a container file
	select BR2_PACKAGE_FFMPEG_AVRESAMPLE		# audio resampler
	select BR2_PACKAGE_LIBCDIO_PARANOIA		# cd-audio
	select BR2_PACKAGE_LIBOPENH264			# openh264

	# AV1 support for x86_64
	select BR2_PACKAGE_DAV1D			if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY       # AV1

	# kodi languages
	select BR2_PACKAGE_KODI20_RESOURCE_LANGUAGE_DE_DE
	select BR2_PACKAGE_KODI20_RESOURCE_LANGUAGE_ES_ES
	select BR2_PACKAGE_KODI20_RESOURCE_LANGUAGE_EU_ES
	select BR2_PACKAGE_KODI20_RESOURCE_LANGUAGE_FR_FR
	select BR2_PACKAGE_KODI20_RESOURCE_LANGUAGE_IT_IT
	select BR2_PACKAGE_KODI20_RESOURCE_LANGUAGE_PT_BR
	select BR2_PACKAGE_KODI20_RESOURCE_LANGUAGE_SV_SE
	select BR2_PACKAGE_KODI20_RESOURCE_LANGUAGE_TR_TR
	select BR2_PACKAGE_KODI20_RESOURCE_LANGUAGE_ZH_CN
	select BR2_PACKAGE_KODI20_RESOURCE_LANGUAGE_EL_GR

	# plugins
	select BR2_PACKAGE_KODI20_PVR_FREEBOX
	select BR2_PACKAGE_KODI_VFS_RAR
	select BR2_PACKAGE_KODI_VFS_LIBARCHIVE

	# default kodi packages for batocera
	select BR2_PACKAGE_KODI_MYSQL
	select BR2_PACKAGE_KODI_ALSA_LIB
	select BR2_PACKAGE_KODI_AVAHI
	select BR2_PACKAGE_KODI_DBUS
	select BR2_PACKAGE_KODI_LIBCEC
	select BR2_PACKAGE_KODI_LIBMICROHTTPD
	select BR2_PACKAGE_KODI_LIBNFS
	select BR2_PACKAGE_KODI_LIBSHAIRPLAY
	select BR2_PACKAGE_KODI_LIBSMBCLIENT
	select BR2_PACKAGE_KODI_VFS_SFTP
	select BR2_PACKAGE_KODI_LIBVDPAU		if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY
	select BR2_PACKAGE_KODI_AUDIODECODER_OPENMPT
	select BR2_PACKAGE_KODI_AUDIODECODER_NOSEFART
	select BR2_PACKAGE_KODI_AUDIODECODER_SIDPLAY
	select BR2_PACKAGE_KODI_AUDIODECODER_SNESAPU
	select BR2_PACKAGE_KODI_AUDIODECODER_STSOUND
	select BR2_PACKAGE_KODI_AUDIODECODER_TIMIDITY
	select BR2_PACKAGE_KODI_AUDIODECODER_VGMSTREAM
	select BR2_PACKAGE_KODI_AUDIOENCODER_FLAC
	select BR2_PACKAGE_KODI_AUDIOENCODER_LAME
	select BR2_PACKAGE_KODI_AUDIOENCODER_VORBIS
	select BR2_PACKAGE_KODI_AUDIOENCODER_WAV
	select BR2_PACKAGE_KODI_IMAGEDECODER_HEIF
	select BR2_PACKAGE_KODI_IMAGEDECODER_RAW
	select BR2_PACKAGE_KODI_INPUTSTREAM_ADAPTIVE
	select BR2_PACKAGE_KODI_INPUTSTREAM_RTMP
	select BR2_PACKAGE_KODI_PVR_ARGUSTV
	select BR2_PACKAGE_KODI_PVR_DVBLINK
	select BR2_PACKAGE_KODI_PVR_DVBVIEWER
	select BR2_PACKAGE_KODI_PVR_FILMON
	select BR2_PACKAGE_KODI_PVR_HDHOMERUN
	select BR2_PACKAGE_KODI_PVR_HTS
	select BR2_PACKAGE_KODI_PVR_IPTVSIMPLE
	select BR2_PACKAGE_KODI_PVR_MEDIAPORTAL_TVSERVER
	select BR2_PACKAGE_KODI_PVR_MYTHTV
	select BR2_PACKAGE_KODI_PVR_NEXTPVR
	select BR2_PACKAGE_KODI_PVR_NJOY
	select BR2_PACKAGE_KODI_PVR_PCTV
	select BR2_PACKAGE_KODI_PVR_STALKER
	select BR2_PACKAGE_KODI_PVR_VBOX
	select BR2_PACKAGE_KODI_PVR_VDR_VNSI 		if !BR2_PACKAGE_BATOCERA_TARGET_RK3399 && !BR2_PACKAGE_BATOCERA_TARGET_RK3588
	select BR2_PACKAGE_KODI_PVR_VUPLUS
	select BR2_PACKAGE_KODI_PVR_WMC
	select BR2_PACKAGE_KODI_SCREENSAVER_ASTEROIDS
	select BR2_PACKAGE_KODI_SCREENSAVER_ASTERWAVE
	select BR2_PACKAGE_KODI_SCREENSAVER_BIOGENESIS
	select BR2_PACKAGE_KODI_SCREENSAVER_CPBLOBS
	select BR2_PACKAGE_KODI_SCREENSAVER_GREYNETIC
	select BR2_PACKAGE_KODI_SCREENSAVER_MATRIXTRAILS
	select BR2_PACKAGE_KODI_SCREENSAVER_PINGPONG
	select BR2_PACKAGE_KODI_SCREENSAVER_PYRO
	select BR2_PACKAGE_KODI_SCREENSAVERS_RSXS
	select BR2_PACKAGE_KODI_SCREENSAVER_SHADERTOY
	select BR2_PACKAGE_KODI_SCREENSAVER_STARS
	select BR2_PACKAGE_KODI_UPNP
	select BR2_PACKAGE_KODI_VISUALISATION_FISHBMC
	select BR2_PACKAGE_KODI_VISUALISATION_GOOM	if BR2_PACKAGE_HAS_LIBGL
	select BR2_PACKAGE_KODI_VISUALISATION_MATRIX
	select BR2_PACKAGE_KODI_VISUALISATION_PICTUREIT
	select BR2_PACKAGE_KODI_VISUALISATION_PROJECTM
	select BR2_PACKAGE_KODI_VISUALISATION_SHADERTOY
	select BR2_PACKAGE_KODI_VISUALISATION_SPECTRUM
	select BR2_PACKAGE_KODI_VISUALISATION_STARBURST
	select BR2_PACKAGE_KODI_VISUALISATION_WAVEFORM
	select BR2_PACKAGE_KODI_LIBBLURAY

	#
	#
	#select BR2_PACKAGE_KODI20_SUPERREPO_REPOSITORIES
	#select BR2_PACKAGE_KODI_SUPERREPO_ALL

	select BR2_PACKAGE_PYTHON_PYCRYPTODOMEX # some plugin like netflix need it
	select BR2_PACKAGE_LIBNSS

	# GBM
	select BR2_PACKAGE_KODI_GBM	if BR2_PACKAGE_BATOCERA_TARGET_XU4	|| \
					   BR2_PACKAGE_BATOCERA_TARGET_S922X	|| \
					   BR2_PACKAGE_BATOCERA_TARGET_H3	|| \
					   BR2_PACKAGE_BATOCERA_TARGET_A3GEN2	|| \
					   BR2_PACKAGE_BATOCERA_TARGET_S9GEN4	|| \
					   BR2_PACKAGE_BATOCERA_TARGET_H5	|| \
					   BR2_PACKAGE_BATOCERA_TARGET_S812	|| \
					   BR2_PACKAGE_BATOCERA_TARGET_RK3288	|| \
					   BR2_PACKAGE_BATOCERA_TARGET_RK3399	|| \
					   BR2_PACKAGE_BATOCERA_TARGET_RK3588	|| \
					   BR2_PACKAGE_BATOCERA_TARGET_S905GEN3	|| \
					   BR2_PACKAGE_BATOCERA_TARGET_RISCV	|| \
					   BR2_PACKAGE_BATOCERA_TARGET_ODIN

config BR2_PACKAGE_BATOCERA_WPA
	bool "batocera.linux WPA supplicant"

	select BR2_PACKAGE_WPA_SUPPLICANT				if !BR2_PACKAGE_HOST_LINUX_HEADERS_CUSTOM_4_4 # wifi
	select BR2_PACKAGE_WPA_SUPPLICANT_CLI				if !BR2_PACKAGE_HOST_LINUX_HEADERS_CUSTOM_4_4 # wifi
	select BR2_PACKAGE_WPA_SUPPLICANT_DBUS				if !BR2_PACKAGE_HOST_LINUX_HEADERS_CUSTOM_4_4 # wifi
	select BR2_PACKAGE_WPA_SUPPLICANT_DBUS_INTROSPECTION		if !BR2_PACKAGE_HOST_LINUX_HEADERS_CUSTOM_4_4 # wifi
	select BR2_PACKAGE_WPA_SUPPLICANT_WIRED				if !BR2_PACKAGE_HOST_LINUX_HEADERS_CUSTOM_4_4 # wpa_supplicant driver, 2.10 requires kernel > 4.4
	select BR2_PACKAGE_WPA_SUPPLICANT_WPA3				if !BR2_PACKAGE_HOST_LINUX_HEADERS_CUSTOM_4_4 # wifi
	select BR2_PACKAGE_WPA_SUPPLICANT_NL80211			if !BR2_PACKAGE_HOST_LINUX_HEADERS_CUSTOM_4_4 # wpa_supplicant driver
	select BR2_PACKAGE_WPA_SUPPLICANT_WEXT				if !BR2_PACKAGE_HOST_LINUX_HEADERS_CUSTOM_4_4 # wpa_supplicant driver
	select BR2_PACKAGE_WPA_SUPPLICANT_K44				if BR2_PACKAGE_HOST_LINUX_HEADERS_CUSTOM_4_4 # wifi
	select BR2_PACKAGE_WPA_SUPPLICANT_K44_CLI			if BR2_PACKAGE_HOST_LINUX_HEADERS_CUSTOM_4_4 # wifi
	select BR2_PACKAGE_WPA_SUPPLICANT_K44_DBUS			if BR2_PACKAGE_HOST_LINUX_HEADERS_CUSTOM_4_4 # wifi
	select BR2_PACKAGE_WPA_SUPPLICANT_K44_DBUS_INTROSPECTION	if BR2_PACKAGE_HOST_LINUX_HEADERS_CUSTOM_4_4 # wifi
	select BR2_PACKAGE_WPA_SUPPLICANT_K44_WIRED			if BR2_PACKAGE_HOST_LINUX_HEADERS_CUSTOM_4_4 # wpa_supplicant driver, 2.10 requires kernel > 4.4
	select BR2_PACKAGE_WPA_SUPPLICANT_K44_WPA3			if BR2_PACKAGE_HOST_LINUX_HEADERS_CUSTOM_4_4 # wifi
	select BR2_PACKAGE_WPA_SUPPLICANT_K44_NL80211			if BR2_PACKAGE_HOST_LINUX_HEADERS_CUSTOM_4_4 # wpa_supplicant driver
	select BR2_PACKAGE_WPA_SUPPLICANT_K44_WEXT			if BR2_PACKAGE_HOST_LINUX_HEADERS_CUSTOM_4_4 # wpa_supplicant driver


config BR2_PACKAGE_BATOCERA_QT6
	bool "batocera.linux Qt6 stack"

	select BR2_PACKAGE_QT6
	select BR2_PACKAGE_QT6_VERSION_LATEST
	select BR2_PACKAGE_QT6BASE
	select BR2_PACKAGE_QT6BASE_CONCURRENT
	select BR2_PACKAGE_QT6BASE_DBUS
	select BR2_PACKAGE_QT6BASE_FONTCONFIG
	select BR2_PACKAGE_QT6BASE_GIF
	select BR2_PACKAGE_QT6BASE_GUI
	select BR2_PACKAGE_QT6BASE_JPEG
	select BR2_PACKAGE_QT6BASE_NETWORK
	select BR2_PACKAGE_QT6BASE_PNG
	select BR2_PACKAGE_QT6BASE_PRINTSUPPORT
	select BR2_PACKAGE_QT6BASE_SQL
	select BR2_PACKAGE_QT6BASE_TEST
	select BR2_PACKAGE_QT6BASE_WIDGETS
	select BR2_PACKAGE_QT6BASE_XML
	select BR2_PACKAGE_QT6BASE_OPENGL		if BR2_PACKAGE_HAS_LIBGL
	select BR2_PACKAGE_QT6BASE_OPENGL_DESKTOP	if BR2_PACKAGE_HAS_LIBGL
	select BR2_PACKAGE_QT6BASE_OPENGL_ES2		if BR2_PACKAGE_HAS_LIBGLES
	select BR2_PACKAGE_QT6BASE_EGLFS		if BR2_PACKAGE_HAS_LIBEGL
	select BR2_PACKAGE_QT6BASE_XCB			if BR2_PACKAGE_XORG7
	select BR2_PACKAGE_QT6DECLARATIVE
	select BR2_PACKAGE_QT6MULTIMEDIA
	select BR2_PACKAGE_QT6SHADERTOOLS
	select BR2_PACKAGE_QT6SVG
	select BR2_PACKAGE_QT6TOOLS
	select BR2_PACKAGE_QT6TOOLS_LINGUIST_TOOLS
	select BR2_PACKAGE_QT6WAYLAND    if BR2_PACKAGE_BATOCERA_WAYLAND
	select BR2_PACKAGE_QT6WEBSOCKETS

config BR2_PACKAGE_BATOCERA_RPI_VCORE
	bool "batocera.linux support vcore RPI"

	select BR2_PACKAGE_RPI_USERLAND
	select BR2_PACKAGE_RASPI2PNG # screenshots

config BR2_PACKAGE_BATOCERA_RPI_MESA3D
	bool "batocera.linux driver mesa RPI"

	select BR2_PACKAGE_MESA3D
	select BR2_PACKAGE_MESA3D_OPENGL_ES
	select BR2_PACKAGE_MESA3D_OPENGL_EGL
	select BR2_PACKAGE_MESA3D_GALLIUM_DRIVER_VC4
	select BR2_PACKAGE_MESA3D_GALLIUM_DRIVER_V3D
	select BR2_PACKAGE_MESA3D_OPENGL_GLX		if BR2_PACKAGE_XORG7 # OpenGL GLX support
	select BR2_PACKAGE_MESA3D_DEMOS			if BR2_PACKAGE_XORG7 # glxinfo etc
	select BR2_PACKAGE_LIBGLVND			if BR2_PACKAGE_XORG7 # opengl


config BR2_PACKAGE_BATOCERA_LIMA_MESA3D
	bool "batocera.linux driver mesa LIMA"

	select BR2_PACKAGE_MESA3D
	select BR2_PACKAGE_MESA3D_OPENGL_ES
	select BR2_PACKAGE_MESA3D_OPENGL_EGL
	select BR2_PACKAGE_MESA3D_GALLIUM_DRIVER_LIMA

config BR2_PACKAGE_BATOCERA_PANFROST_MESA3D
	bool "batocera.linux driver mesa PANFROST"

	select BR2_PACKAGE_MESA3D
	select BR2_PACKAGE_MESA3D_OPENGL_ES
	select BR2_PACKAGE_MESA3D_OPENGL_EGL
	select BR2_PACKAGE_MESA3D_GALLIUM_DRIVER_PANFROST
	select BR2_PACKAGE_MESA3D_OPENGL_GLX    if BR2_PACKAGE_XORG7 # OpenGL GLX support
	select BR2_PACKAGE_MESA3D_DEMOS			if BR2_PACKAGE_XORG7 # glxinfo etc
	select BR2_PACKAGE_LIBGLVND			    if BR2_PACKAGE_XORG7 # opengl vendor neutral dispatch

config BR2_PACKAGE_BATOCERA_MALI_G610
	bool "batocera.linux driver mesa MALI"

	select BR2_PACKAGE_MALI_G610

config BR2_PACKAGE_BATOCERA_FREEDRENO_MESA3D
	bool "batocera.linux driver mesa FREEDRENO"

	select BR2_PACKAGE_MESA3D
	select BR2_PACKAGE_MESA3D_OPENGL_ES
	select BR2_PACKAGE_MESA3D_OPENGL_EGL
	select BR2_PACKAGE_MESA3D_GALLIUM_DRIVER_FREEDRENO
	select BR2_PACKAGE_MESA3D_OPENGL_GLX    if BR2_PACKAGE_XORG7 # OpenGL GLX support
	select BR2_PACKAGE_MESA3D_DEMOS			if BR2_PACKAGE_XORG7 # glxinfo etc
	select BR2_PACKAGE_LIBGLVND			    if BR2_PACKAGE_XORG7 # opengl vendor neutral dispatch

config BR2_PACKAGE_BATOCERA_LINUX_FIRMWARES
	bool "batocera.linux Firmwares packages selection"

	# alllinuxfirmwares
	select BR2_PACKAGE_ALLLINUXFIRMWARES		if !BR2_PACKAGE_BATOCERA_TARGET_H616

	# buildroot firmware
	select BR2_PACKAGE_LINUX_FIRMWARE		if BR2_PACKAGE_BATOCERA_TARGET_RK3288

	# common firmwares
	select BR2_PACKAGE_UX500_FIRMWARE
	select BR2_PACKAGE_WILC1000_FIRMWARE
	select BR2_PACKAGE_ZD1211_FIRMWARE
	select BR2_PACKAGE_B43_FIRMWARE

	# audio
	select BR2_PACKAGE_SOUND_OPEN_FIRMWARE			if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY

	# x86 (maybe some firmware could be for all, to be checked)
	select BR2_PACKAGE_WILINK_BT_FIRMWARE			if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY

	# RaspberryPi Firmwares bluetooth and wifi
	select BR2_PACKAGE_BRCMFMAC_SDIO_FIRMWARE_RPI		if BR2_PACKAGE_BATOCERA_RPI_ANY
	select BR2_PACKAGE_BRCMFMAC_SDIO_FIRMWARE_RPI_BT	if BR2_PACKAGE_BATOCERA_RPI_ANY
	select BR2_PACKAGE_BRCMFMAC_SDIO_FIRMWARE_RPI_WIFI	if BR2_PACKAGE_BATOCERA_RPI_ANY

	# RK3588
	select BR2_PACKAGE_FIRMWARE_RK3588			if BR2_PACKAGE_BATOCERA_TARGET_RK3588

	# Extra linux firmware
	select BR2_PACKAGE_EXTRALINUXFIRMWARES			if BR2_PACKAGE_BATOCERA_TARGET_H616		|| \
								   BR2_PACKAGE_BATOCERA_TARGET_H6		|| \
								   BR2_PACKAGE_BATOCERA_TARGET_AMLOGIC_ANY	|| \
								   BR2_PACKAGE_BATOCERA_TARGET_RK3399
	# orangepi firmware
	select BR2_PACKAGE_FIRMWARE_ORANGEPI			if BR2_PACKAGE_BATOCERA_TARGET_H3	|| \
								   BR2_PACKAGE_BATOCERA_TARGET_H5	|| \
								   BR2_PACKAGE_BATOCERA_TARGET_H6	|| \
								   BR2_PACKAGE_BATOCERA_TARGET_H616

config BR2_PACKAGE_BATOCERA_SDL2
	bool "BATOCERA SDL2"

	select BR2_PACKAGE_SDL2
	select BR2_PACKAGE_SDL2_GFX
	select BR2_PACKAGE_SDL2_IMAGE
	select BR2_PACKAGE_SDL2_MIXER
	select BR2_PACKAGE_SDL2_NET
	select BR2_PACKAGE_SDL2_TTF
	select BR2_PACKAGE_SDL2_OPENGLES
	select BR2_PACKAGE_SDL2_OPENGL		if BR2_PACKAGE_HAS_LIBGL
	select BR2_PACKAGE_SDL2_X11		if BR2_PACKAGE_XORG7
	select BR2_PACKAGE_SDL2_KMSDRM		if !BR2_PACKAGE_BATOCERA_RPI_VCORE
	select BR2_PACKAGE_SDL2_WAYLAND		if BR2_PACKAGE_BATOCERA_WAYLAND
	select BR2_PACKAGE_FLAC			# flac
	select BR2_PACKAGE_LIBMAD		# mp3
	select BR2_PACKAGE_LIBVORBIS		# ogg

config BR2_PACKAGE_BATOCERA_WAYLAND
	bool "batocera.linux wayland packages selection"

	# Wayland Protocol
	select BR2_PACKAGE_WAYLAND
	select BR2_PACKAGE_WAYLAND_UTILS
	select BR2_PACKAGE_WAYLAND_PROTOCOLS

config BR2_PACKAGE_BATOCERA_WAYLAND_SWAY
	bool "batocera.linux wayland sway packages selection"

	# Wayland Protocol
	select BR2_PACKAGE_BATOCERA_WAYLAND

	# Seat management daemon
	select BR2_PACKAGE_SEATD
	select BR2_PACKAGE_SEATD_DAEMON

	# Compositor for wayland
	select BR2_PACKAGE_SWAY
	select BR2_PACKAGE_SWAYBG

config BR2_PACKAGE_BATOCERA_XWAYLAND
	bool "batocera.linux xwayland packages selection"

	# Xorg emulation layer of Wayland
	select BR2_PACKAGE_XORG7
	select BR2_PACKAGE_XWAYLAND
	select BR2_PACKAGE_WLROOTS_X11
	select BR2_PACKAGE_WLROOTS_XWAYLAND

	# Xorg apps
	select BR2_PACKAGE_BATOCERA_DESKTOPAPPS		# batocera applications config and scripts
	select BR2_PACKAGE_LIBGTK3			# gtk3 library
	select BR2_PACKAGE_L3AFPAD			# gtk3 text editor
	select BR2_PACKAGE_PCMANFM			# file manager
	select BR2_PACKAGE_GVFS				# file systems (trash, smb, ... in pcmanfm)
	select BR2_PACKAGE_ADWAITA_ICON_THEME_LIGHT	# theme for file manager
	select BR2_PACKAGE_XTERM			# terminal
	select BR2_PACKAGE_XLIB_LIBXFT			# font size for xterm

config BR2_PACKAGE_BATOCERA_XORG
	bool "batocera.linux xorgs packages selection"

	select BR2_PACKAGE_XORG7
	select BR2_PACKAGE_XSERVER_XORG_SERVER

	# xwayland based architecture (no more ddx drivers)
	select BR2_PACKAGE_LIBEPOXY		# required to enable xorg glamor
	select BR2_PACKAGE_WAYLAND_PROTOCOLS	if BR2_PACKAGE_WAYLAND
	select BR2_PACKAGE_XLIB_LIBXCOMPOSITE

	# drivers
	select BR2_PACKAGE_XDRIVER_XF86_INPUT_EVDEV
	select BR2_PACKAGE_XDRIVER_XF86_INPUT_LIBINPUT
	select BR2_PACKAGE_XDRIVER_XF86_INPUT_SYNAPTICS

	# GPU drivers (needed for old Nvidia&AMD cards for edid handshake with display)
	select BR2_PACKAGE_XDRIVER_XF86_VIDEO_AMDGPU			if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY
	select BR2_PACKAGE_XDRIVER_XF86_VIDEO_ATI			if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY
	select BR2_PACKAGE_XDRIVER_XF86_VIDEO_NOUVEAU			if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY
	# select BR2_PACKAGE_XDRIVER_XF86_VIDEO_INTEL			if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY # disabed due to issues with newer intel gpu's
	# nvidia xorg packages are selected by batocera-nvidia package

	# applications
	select BR2_PACKAGE_XAPP_SETXKBMAP
	select BR2_PACKAGE_XAPP_XEV
	select BR2_PACKAGE_XAPP_XINIT
	select BR2_PACKAGE_XAPP_XINPUT
	select BR2_PACKAGE_XAPP_XRANDR			# required for resolution manipulation
	select BR2_PACKAGE_XAPP_XSET			# X11 Xset command
	select BR2_PACKAGE_XAPP_XBACKLIGHT		# set the backlight

	select BR2_PACKAGE_BATOCERA_DESKTOPAPPS		# batocera applications config and scripts
	select BR2_PACKAGE_LIBGTK3			# gtk3 library
	select BR2_PACKAGE_L3AFPAD			# gtk3 text editor
	select BR2_PACKAGE_PCMANFM			# file manager
	select BR2_PACKAGE_GVFS				if BR2_PACKAGE_PCMANFM # file systems (trash, smb, ... in pcmanfm)
	select BR2_PACKAGE_ADWAITA_ICON_THEME_LIGHT	if BR2_PACKAGE_PCMANFM # theme for file manager
	select BR2_PACKAGE_XTERM			# terminal
	select BR2_PACKAGE_OPENBOX			# window manager
	select BR2_PACKAGE_UNCLUTTER			if !BR2_PACKAGE_BATOCERA_TARGET_X86 # hide mouse
	select BR2_PACKAGE_TOUCHEGG			# touchscreen extended gestures

	# vendor neutral GL dispatch library
	# already set by nvidia for x86_64, but required on x86 for pcsx2
	# required for RPi4 OpenGL stack
	select BR2_PACKAGE_LIBGLVND			if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY

config BR2_PACKAGE_BATOCERA_GPU_X86
	bool "batocera.linux GPU support for x86 platform"

	# nvidia
	select BR2_PACKAGE_BATOCERA_NVIDIA			if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY
	# AMD
	select BR2_PACKAGE_BATOCERA_AMD				if BR2_PACKAGE_BATOCERA_TARGET_X86_64_ANY

	# mesa
	select BR2_PACKAGE_MESA3D
	select BR2_PACKAGE_MESA3D_GALLIUM_DRIVER_I915		if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY	#batocera- Intel legacy
	select BR2_PACKAGE_MESA3D_GALLIUM_DRIVER_CROCUS		if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY	#batocera- Intel Gen4-7
	select BR2_PACKAGE_MESA3D_GALLIUM_DRIVER_SWRAST
	select BR2_PACKAGE_MESA3D_GALLIUM_DRIVER_SVGA
	select BR2_PACKAGE_MESA3D_GALLIUM_DRIVER_IRIS		if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY	#batocera- Intel Gen8+
	select BR2_PACKAGE_MESA3D_GALLIUM_DRIVER_NOUVEAU	if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY
	select BR2_PACKAGE_MESA3D_GALLIUM_DRIVER_R600		if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY
	select BR2_PACKAGE_MESA3D_GALLIUM_DRIVER_RADEONSI	if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY
	select BR2_PACKAGE_MESA3D_GALLIUM_DRIVER_VIRGL		if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY
	select BR2_PACKAGE_MESA3D_GALLIUM_DRIVER_R300		if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY
	select BR2_PACKAGE_MESA3D_GALLIUM_DRIVER_ZINK		if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY	#batocera- possible other platforms
	select BR2_PACKAGE_MESA3D_VDPAU				if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY
	select BR2_PACKAGE_MESA3D_OPENGL_ES
	select BR2_PACKAGE_MESA3D_OPENGL_EGL
	select BR2_PACKAGE_MESA3D_OPENGL_GLX			if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY
	select BR2_PACKAGE_MESA3D_LLVM
	select BR2_PACKAGE_MESA3D_DEMOS

	select BR2_PACKAGE_MESA3D_VIDEO_CODEC_VC1DEC		if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY
	select BR2_PACKAGE_MESA3D_VIDEO_CODEC_H264DEC		if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY
	select BR2_PACKAGE_MESA3D_VIDEO_CODEC_H264ENC		if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY
	select BR2_PACKAGE_MESA3D_VIDEO_CODEC_H265DEC		if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY
	select BR2_PACKAGE_MESA3D_VIDEO_CODEC_H265ENC		if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY
	select BR2_PACKAGE_MESA3D_VIDEO_CODEC_AV1DEC		if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY
	select BR2_PACKAGE_MESA3D_VIDEO_CODEC_AV1ENC		if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY
	select BR2_PACKAGE_MESA3D_VIDEO_CODEC_VP9DEC		if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY

	# utils
	select BR2_PACKAGE_LIBVA_INTEL_DRIVER			if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY
	select BR2_PACKAGE_LIBVA_UTILS				if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY
	select BR2_PACKAGE_VDPAUINFO				if BR2_PACKAGE_BATOCERA_TARGET_X86_ANY

### ### ###
