config BR2_PACKAGE_FWTS
	bool "fwts"
	depends on BR2_i386 || BR2_x86_64 || BR2_aarch64
	depends on BR2_PACKAGE_LIBBSD_ARCH_SUPPORTS # libbsd
	depends on BR2_TOOLCHAIN_HAS_SYNC_4 # json-c
	depends on BR2_USE_MMU # libglib2
	depends on BR2_USE_WCHAR # libglib2, libbsd
	depends on BR2_TOOLCHAIN_HAS_THREADS # libglib2, libbsd
	depends on BR2_TOOLCHAIN_USES_GLIBC # execinfo.h
	select BR2_PACKAGE_LIBGLIB2
	select BR2_PACKAGE_JSON_C
	select BR2_PACKAGE_LIBBSD
	help
	  Firmware Test Suite (FWTS) is a test suite that performs
	  sanity checks on firmware. It is intended to identify BIOS and
	  ACPI errors and if appropriate it will try to explain the
	  errors and give advice to help workaround or fix firmware
	  bugs.

	  dtc (libfdt) is an optional dependency for fdt related tests.

	  https://wiki.ubuntu.com/FirmwareTestSuite

if BR2_PACKAGE_FWTS
config BR2_PACKAGE_FWTS_EFI_RUNTIME_MODULE
	bool "efi_runtime module"
	depends on BR2_LINUX_KERNEL
	help
	  Firmware Test Suite (FWTS) provides a EFI runtime kernel
	  module required to run UEFI tests.

comment "efi_runtime module needs a Linux kernel to be built"
	depends on !BR2_LINUX_KERNEL
endif

comment "fwts needs a glibc toolchain w/ wchar, threads"
	depends on BR2_i386 || BR2_x86_64 || BR2_aarch64
	depends on BR2_PACKAGE_LIBBSD_ARCH_SUPPORTS # libbsd
	depends on BR2_TOOLCHAIN_HAS_SYNC_4
	depends on BR2_USE_MMU
	depends on !BR2_USE_WCHAR || !BR2_TOOLCHAIN_HAS_THREADS || \
		!BR2_TOOLCHAIN_USES_GLIBC
